
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam 2018 - Round 1B</h3><h1>Analysis: Rounding Error</h1><h3>Test set 1</h3>
<p>
  This test set can be solved using a complete search. We can try every possible
  partition of <b>N</b> voters among <b>N</b> languages. If two partitions
  differ only in the order of their languages, then we consider those partitions
  equivalent.
</p>
<p>
  Therefore, we can consider a partition as an <b>N</b>-tuple
  (x<sub>1</sub>, x<sub>2</sub>, ..., x<sub><b>N</b></sub>), where
  x<sub>i</sub> &ge; x<sub>i + 1</sub> and &Sigma; x<sub>i</sub> = <b>N</b>.
</p>
<p>
  Even with <b>N</b> = 25, there are <a href="https://oeis.org/A000041">no more
  than 2,000</a> different partitions. For each partition, we can use the
  following greedy algorithm to check whether the partition can be achieved by
  only adding voters: let us sort the <b>C</b><sub>i</sub> values in
  non-increasing order &mdash; that is, such that
  <b>C</b><sub>i</sub> &ge; <b>C</b><sub>i + 1</sub>. Then the partition can be
  achieved by only adding voters if and only if
  <b>x</b><sub>i</sub> &ge; <b>C</b><sub>i</sub> for all 1 &le; i &le; <b>L</b>.
  Among all such partitions, we can find the largest percentage sum, which is
  our answer.
</p>
<h3>Test set 2</h3>
<p>
  For this test set, we can remove our assumption that a partition and <b>C</b>
  must be sorted non-increasingly. Therefore, we consider a partition of
  <b>N</b> voters to <b>N</b> languages as
  (x<sub>1</sub>, x<sub>2</sub>, ..., x<sub><b>N</b></sub>), where
  &Sigma; x<sub>i</sub> = <b>N</b>.
</p>
<p>
  To solve this test set, we can use
  <a href="https://en.wikipedia.org/wiki/Dynamic_programming">
  dynamic programming</a> (DP). We define a function f(a, b) as the following:
</p>
<p>
  Among all partitions
  (x<sub>1</sub>, x<sub>2</sub>, ..., x<sub>a</sub>) such that
  &Sigma; (1 &le; i &le; a) x<sub>i</sub> = b and
  x<sub>i</sub> &ge; <b>C</b><sub>i</sub> for all 1 &le; i &le; a, what is the
  maximum &Sigma; (1 &le; i &le; a) round(x<sub>i</sub> / <b>N</b> &times; 100)
  possible? If there is no satisfying partition, then f(a, b) = -&infin;. We
  can assume <b>C</b><sub>i</sub> = 0 for i &gt; <b>L</b>.
</p>
<p>
  We can first handle the base case of the function. We can easily compute
  f(1, b) since there is only at most one satisfying partition. Therefore,
  f(1, b) = round(b / <b>N</b> &times; 100) if b &geq; <b>C</b><sub>1</sub>, or
  -&infin; otherwise.
</p>
<p>
  The recurrence f(a, b) of this function can be computed by considering all
  possible values of x<sub>a</sub>. Let i be the value of x<sub>a</sub>.
  Therefore, x<sub>a</sub> contributed round(i / <b>N</b> &times; 100) to the
  total percentage, and there are (b - i) votes left to be distributed among
  x<sub>1</sub>, x<sub>2</sub>, ..., x<sub>a - 1</sub>. Therefore,
  for a > 1, f(a, b) = max (<b>C</b><sub>a</sub> &le; i &le; b)
  (round(i / <b>N</b> &times; 100) + f(a - 1, b - i)).
</p>
<p>
  Since we want to distribute <b>N</b> voters to
  x<sub>1</sub>, x<sub>2</sub>, ..., x<sub><b>N</b></sub>, the answer for the
  problem is f(<b>N</b>, <b>N</b>).
</p>
<p>
  Function f has O(<b>N</b><sup>2</sup>) possible states and each state takes
  O(<b>N</b>) time to compute. Therefore, this solution runs in
  O(<b>N</b><sup>3</sup>) time.
</p>
<h3>Test set 3</h3>
<p>
  We can solve this test set with a greedy strategy. For each language, we will
  either be rounding the percentage up or down. We get the maximum answer when
  as many of these as possible are rounded up.
</p>
<p>
  Therefore, we can ignore any languages that are already being rounded up.
  Since there can be arbitrarily many languages, nothing ever forces us to
  disturb these languages by adding another vote&mdash;it's no worse to add that
  vote to some new language instead. We figure out how many more votes each
  language (including languages nobody has even mentioned yet) would need in
  order for it to be rounded up.
</p>
<p>
  We greedily satisfy as many of these as possible, starting with the ones that
  take the fewest additional votes. This solution runs in
  O(<b>N</b> &times; log(<b>N</b>)) time.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>



    </div>
  </body>
</html>
