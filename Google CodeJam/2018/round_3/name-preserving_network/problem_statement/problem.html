
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam 2018 - Round 3</h3><h1>Name-Preserving Network</h1><h3>Problem</h3>

<p>
  A research consortium is building a new datacenter. In the datacenter,
  a set of computers is set up to work together and communicate via a network.
  The network works only with direct bidirectional links between computers.
  A pair of computers c<sub>1</sub> and c<sub>2</sub> that are not connected
  by a direct link can still communicate with each other, as long as there is
  at least one path of links l<sub>1</sub>, l<sub>2</sub>, ..., l<sub>k</sub>
  such that links l<sub>i</sub> and l<sub>i+1</sub> share an endpoint,
  c<sub>1</sub> is an endpoint of l<sub>1</sub>, and c<sub>2</sub> is an
  endpoint of l<sub>k</sub>. Any two computers can have at most one direct link between
  them.
</p><p>
  The consortium has asked you to submit a design that illustrates how many
  computers will be in the network and how they will be connected to each other.
  Each network design you submit must comply with a specific set of
  restrictions:
</p><ol>
  <li>There must be between <b>L</b> and <b>U</b> computers, inclusive, in the
    network.</li>
  <li>Each computer must be an endpoint of exactly 4 links, linking it to 4 other
    distinct computers.</li>
  <li>Every pair of computers must be able to communicate with each other,
    as described above.</li>
  <li>The computers must be able to uniquely identify themselves even if their
    IDs are randomly changed while the system is off.</li>
</ol><p>
  To elaborate on the last point: each of the N computers in a network design
  is initially assigned a unique integer between 1 and N that identifies it.
  However, it is possible that after some downtime, the system will boot up
  and the indentifiers will be permuted &mdash; that is, each computer will
  still have a unique integer between 1 and N, but not necessarily the original
  one. The network must be able to recover the original identifying integers
  without having access to any information other than the existing direct links.
</p><p>
  To evaluate your network designs, the research consortium has set up an
  automated program. The program will receive one of your network designs,
  validate conditions 1-3 above, and then send back a copy of the network
  design with the following changes:
</p><ul>
  <li>the unique IDs have been permuted at random (that is, each ID is now
    equally likely to be on any of the computers),</li>
  <li>every link is listed with the smallest ID first (using the new IDs),
    and</li>
  <li>the set of links is listed in increasing order of the first endpoint
    (using the new IDs), breaking ties by smallest second endpoint (i.e.,
    lexicographical order).</li>
</ul><p>
  You need to be able to determine exactly how the IDs were changed. Formally,
  the automated program will create a secret random permutation f of the
  integers 1 through N, and it will assign those numbers to computers in a
  "blank copy" of the network with all of the previous links removed. Then, for
  each link between computers i and j in your network design, it will add a
  link between f(i) and f(j) to the copy. You then must recreate <u>exactly</u>
  the f that the automated program created. If there exists a different f' that
  yields the same result and you return f', the consortium will not accept your
  network design, as in such a case, you cannot ensure that the recovered IDs
  are the original ones.
</p><p>
  For every N between 10 and 100, inclusive, there exists at least one network
  of N computers that complies with all restrictions above and has the property
  that applying two different permutations f and f' to it produces two
  different sets of links.
</p>

<h3>Input and output</h3>
<p>
  This problem is
  <a href="https://codingcompetitions.withgoogle.com/codejam/faq#interactive-problems" target="_blank">interactive</a>,
  which means that the concepts of input and output are different than in
  standard Code Jam problems. You will interact with a separate process that
  both provides you with information and evaluates your responses. All
  information comes into your program via standard input; anything that you
  need to communicate should be sent via standard output. Remember that many
  programming languages buffer the output by default, so make sure your output
  actually goes out (for instance, by flushing the buffer) before blocking to
  wait for a response. See the
  <a href="https://codingcompetitions.withgoogle.com/codejam/faq#interactive-problems" target="_blank">FAQ</a>
  for an explanation of what it means to flush the buffer. Anything your
  program sends through standard error is ignored, but it might consume some
  memory and be counted against your memory limit, so do not overflow it. To
  help you debug, a local testing tool script (in Python) is provided at the
  very end of the problem statement. In addition, sample solutions to a
  previous Code Jam interactive problem (in all of our supported languages) are
  provided in the analysis for
  <a href="https://codingcompetitions.withgoogle.com/codejam/round/0000000000000130/0000000000000523" target="_blank">Number Guessing</a>.
</p><p>
  Initially, your program should read a single line containing a single integer
  <b>T</b> indicating the number of test cases. Then, you need to process
  <b>T</b> test cases.
</p><p>
  For each test case, your program will first read a single line containing two
  integers <b>L</b> and <b>U</b> indicating the inclusive range of values for
  the number of computers in your network design.
</p><p>
  Then, you need to create a network design with N computers and print 2N+1
  lines representing that design. The first line must contain a single integer
  N. The remaining 2N lines must contain two integers A and B each, each
  representing a different link between computers A and B, where A != B. Notice
  that if you list link A B, you may not list A B nor B A again.
</p><p>
  Upon reading your network design, the judge will first check the first three
  conditions listed in the statement above. If any of those is not met, the
  judge will send you a single line containing a single <code>-1</code>, and
  then finish all communication and wait for your program to finish. If your
  program does finish correctly and without violating other limits, it
  will receive a Wrong Answer verdict.
</p><p>
  If all of the conditions are met, the judge will send you 2N+1 lines. The
  first line will contain a single integer N (the same N you sent). Then, the
  next 2N lines will contain two integers each, describing the links of the
  copy of the network design, in the same format as you used. The copy is
  generated as described above, with the permutation f chosen uniformly at
  random from all possible permutations, independently of your network design.
</p><p>
  To finish a test case, you need to send the judge a single line with N
  integers X<sub>1</sub>, X<sub>2</sub>, ..., X<sub>N</sub>, representing that
  the computer to which you assigned number i was assigned number X<sub>i</sub>
  in the judge's copy, for all i.
</p><p>
  If the list is not the list the judge generated, you will receive a Wrong
  Answer verdict. If it was in the last test case, the judge will send no
  additional communication. Otherwise, the judge will send a single line
  containing a single -1, and then no additional communication. In both cases,
  the judge will wait for your program to end, and assign the Wrong Answer
  verdict only if it ended normally and without violating any resource limits.
</p><p>
  You should not send additional information to the judge after solving all
  test cases. In other words, if your program keeps printing to standard output
  after printing the list of Xs for the last test case, you will receive a
  Wrong Answer judgment.
</p><p>
  Notice that you are allowed to submit the same network design for different
  test cases, as long as that design complies with all restrictions for both
  cases. Additionally, the seed from random generation in the judge is fixed,
  so sending the same set of original network designs in the same order will
  get back the same set of copies.
</p>

<h3>Limits</h3>
<p>
  1 &le; <b>T</b> &le; 30.<br/>
  Time limit: 10 seconds per test set.<br/>
  Memory limit: 1GB.<br/>
</p>

<h4>Test set 1 (Visible)</h4>
<p>
  <b>L</b> = 10.<br/>
  <b>U</b> = 50.<br/>
</p>

<h4>Test set 2 (Hidden)</h4>
<p>
  10 &le; <b>L</b> &le; 50.<br/>
  <b>L</b> = <b>U</b>.<br/>
</p>

<h3>Sample Interaction</h3>

<p>
  Note that this sample interaction uses a smaller value of <b>L</b> than the
  real data, for ease of illustration. Also note that there is no network of
  exactly 6 computers with the property that applying two different
  permutations f and f' to it produces two different sets of links, so it would
  be a bad idea to design a network of exactly 6 computers, even if the
  problem's limits allowed it!
</p>
<pre>
  t = readline_int()           // reads 2 into t
  limits = readline_int_list() // reads 6 50 into limits
  printline 6 to stdout        // using 6 computers. Contestant designs an
                               //   octahedral network
  printline 2 4 to stdout
  printline 1 2 to stdout      // you do not need to list edges in any
                               //   particular order
  printline 3 1 to stdout      // you do not need to give the endpoints of a
                               //   link in order
  printline 1 4 to stdout
  printline 1 5 to stdout
  printline 2 3 to stdout
  printline 2 6 to stdout
  printline 3 5 to stdout
  printline 3 6 to stdout
  printline 4 5 to stdout
  printline 4 6 to stdout
  printline 5 6 to stdout
  flush stdout                 // judge verifies that the network meets
                               //   conditions 1-3 above, and secretly picks
                               //   2 6 3 1 5 4 as the new permutation
  n = readline_int()           // reads 6 into n
  repeat 12 times:
    add readline_int_list() to edges  // reads 1 2, 1 4, 1 5, 1 6, 2 3, 2 5,
                                      //   2 6, 3 4, 3 5, 3 6, 4 5, 4 6, in
                                      //   that order
  printline 2 5 6 1 3 4        // note that this is consistent with what the
                               //   judge sent, but is not the permutation the
                               //   judge used
  flush stdout                 // judge decides that this is wrong
  limits = readline_int_list() // expects to read the next case but gets -1,
                               //   indicating a wrong answer
  exit                         // exits to avoid an ambiguous TLE error
</pre>


<h3>Testing Tool</h3>
<p>
  You can use this testing tool to test locally or on our platform. To test
  locally, you will need to run the tool in parallel with your code; you can
  use our <a href="https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py">interactive runner</a>
  for that. For more information, read the instructions in comments in that
  file, and also check out the
  <a href="/codejam/faq#interactive-problems" target="_blank">Interactive Problems section</a>
  of the FAQ.
</p><p>
  Instructions for the testing tool are included in comments within the tool.
  We encourage you to add your own test cases. Please be advised that although
  the testing tool is intended to simulate the judging system, it is <b>NOT</b>
  the real judging system and might behave differently. If your code passes the
  testing tool but fails the real judge, please check the
  <a href="/codejam/faq#coding" target="_blank">Coding section</a>
  of the FAQ to make sure that you are using the same compiler as us.
</p><p>
<a href="local_testing_tool.py" download="testing_tool.py">Download testing tool</a>
</p>

    </div>
  </body>
</html>
