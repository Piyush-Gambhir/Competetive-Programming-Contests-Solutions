
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam 2018 - World Finals</h3><h1>Analysis: Two-Tiling</h1><p>
  The restriction on tile size limits the problem to just 35 distinct tiles,
  and therefore "only" 35 * 34 / 2 = 595 possible cases. We might consider
  whittling away at this number via individual insights &mdash; e.g., any case
  with a 9-cell tile and an 8-cell tile must be impossible, since the least
  common multiple of 9 and 8 is 72, which is larger than the allowed board
  size. We may even be tempted to cut out some paper tiles and do some solving
  by hand, but if so, we will quickly discover that this is harder than it
  seems, and it is particularly hard to be sure that a case is impossible. We
  need to either write a Master's thesis on properties of n-ominoes, or take an
  exhaustive approach.
</p><p>
  We cannot simply find all of the ways to tile part or all of the board with
  each tile, and then intersect those two sets; there could be too many
  possible tilings to generate (e.g., 2<sup>64</sup> for the 1x1 tile). Even
  if we could come up with special-case solutions to get around this issue for
  enough of the smaller tiles, we would still waste a lot of time enumerating
  sets that are obviously incompatible with the other tile.
</p><p>
  Instead, we can use a backtracking strategy that takes advantage of our
  constraints, using the placement one type of tile to guide how we place the
  other type. The strategy does not have to be lightning-fast; we know that
  every case will appear in the test set, so we can enumerate and solve them
  all offline and then submit once we have an answer for each one. However, it
  must be fast enough to generate all 595 answers before the World Finals end!
</p><p>
  Let us number the cells of the 8x8 board in row-major order, which is the
  same order in which our backtracking search will explore. We can translate
  each tile (and all of its rotations and reflections) around the 8x8 board to
  exhaustively find all possible placements. Then, we can assign each of those
  placements to the lowest-numbered cell that the placement uses. For example,
  one placement of the 2x2 square tile can cover cells 1, 2, 9, and 10 of the
  board, and the lowest-numbered of those cells is 1, so we assign that
  placement to cell 1. Now we have a helpful map from each board cell to the
  tile placements that fit there. Notice that it would be redundant to list
  our example 2x2 square tile placement under cell 10. For example, by the time
  our search reaches cell 10, it will have already considered that same
  placement at cell 1, so there would be no need to consider it again.
</p><p>
  Then, starting in the upper left cell and going in row-major order, we try to
  build a set of cells that can be tiled by both tiles. For each cell c, we
  decide whether to fill it. If it is already covered by a previous tile
  placement, we must fill it; if we decide to fill it, and it is not already
  covered by one or both types of tiles, then we have our search explore all
  of the tile positions assigned to that cell in our map above.
</p><p>
  Since the board is 8x8, we can use the bits of a 64-bit data type to
  represent each tile's coverage of the board, and we can use bitmasking to
  quickly see whether desired cells are occupied, or generate one state from an
  existing state. It is also very quick to check whether two states are equal;
  if this is ever the case, we stop immediately, step back through our
  backtracking to figure out exactly how to divide that set up into tiles of
  each type, and output that tiling. If the backtracking process finishes
  without finding such a set, then the case is impossible.
</p><p>
  This solution turns out to be fast in practice, running in seconds.
  Intuitively, small tiles are more "flexible" and it is easier to find
  solutions quickly for cases involving them, whereas large tiles fill up the
  board's cells rapidly and do not open up as many choices. That is, the
  recursion tree for the backtracking is wide but short in the case of small
  tiles, and tall but narrow in the case of large tiles.
</p><p>
  This approach does not necessarily find minimal sets of cells, but it can
  generate some artistically pleasing shapes and tilings, and/or puzzles that
  really would be fun to solve! Here are a couple examples generated by one of
  our solutions:
</p>
<p>
  These angular tiles create a solution with a surprising mix of dense and
  holey areas!
</p>
<code>
  aaa.bbb. AAA.BBB.<br/>
  a..cbcb. A..CCCB.<br/>
  aaacbcb. ADDDECB.<br/>
  ...ccc.. ...DEC..<br/>
  ..dddeee ..FDEEEG<br/>
  ..d....e ..F....G<br/>
  ..dddeee ..FFFGGG<br/>
  ........ ........<br/>
</code>
<p>
  We hope you "loved" this problem! Notice that a test case is not necessarily
  any easier when the two tiles differ in only a very small way.
</p>
<code>
  aa...bb. AA...BB.<br/>
  aaa..bbb AAA..CBB<br/>
  acacdbdb DDACCCBB<br/>
  .cccddd. .DDCCEE.<br/>
  .cceedd. .DDFFEE.<br/>
  ..eefff. ..FFEEG.<br/>
  ..eeeff. ..FFGGG.<br/>
  ....ff.. ....GG..<br/>
</code>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>



    </div>
  </body>
</html>
