
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam 2022 - Round 3</h3><h1>Revenge of GoroSort</h1><h3>Problem</h3>
<p>
<i>In this problem, when something is said to be chosen at random, it means uniformly at
  random from among all valid possibilities, and independently of any other choice.</i>
</p>
<p>
  Code Jam contestants once
  <a href="https://codingcompetitions.withgoogle.com/codejam/round/0000000000432f3a/0000000000432ccf" target="_blank">helped the mighty Goro sort an array of integers</a>.
  (You do not need to read that problem to solve this one.) Once again, Goro
  needs your help. He has $$$\mathbf{N}$$$ boxes lined up on the table in a single row, numbered
  $$$1$$$ through $$$\mathbf{N}$$$ from left to right.
  Each box has exactly one ball inside. Balls are also numbered
  $$$1$$$ through $$$\mathbf{N}$$$. Goro wants ball $$$i$$$ to end up in box $$$i$$$, for all $$$i$$$.
  That is, he wants to leave the balls in sorted order.
  Unfortunately, that is not initially the case.
</p><p>
  When Goro bumps the table with his powerful fists, balls pop up in the air
  and fall back in boxes. Goro can do this so accurately that exactly one ball
  falls into each box. A ball may fall into the same box it came out of, or
  into a different one.
</p><p>
  Better yet, Goro also has the ability to assign colors to boxes before
  each bump. Then, he can bump the table in such a way that balls coming out of
  a box of color $$$c$$$ always fall into a box of color $$$c$$$. As impressive
  as this accuracy is, Goro does not have any more control than that. Within each color,
  balls end up assigned to boxes at random.
</p><p align="center">
  <img src="img/revenge_of_goro_sort.png"
       alt="6 boxes numbered 1 to 6 from left-to-right. Box 1 is red.
            Boxes 2 and 6 are green. Boxes 3-5 are blue.
            There is a grey ball in each box. The balls are numbered 1, 4, 3, 6, 5, 2."/>
</p><p>
  For example, suppose the balls appear in the order $$$1, 4, 3, 6, 5, 2$$$ (as seen above). He might choose
  &mdash; not necessarily optimally &mdash; to give the first box the color red,
  the second and sixth boxes the color green, and the third through
  fifth boxes the color blue. Then, after Goro bumps the table,
</p>
<ul>
  <li>The $$$1$$$ in the first box falls back into the same box, because that is the only
    red box.</li>
  <li>The $$$4$$$ and $$$2$$$ in the second and sixth boxes remain in
    place with probability $$$\frac{1}{2}$$$, and switch places with
    probability $$$\frac{1}{2}$$$.</li>
  <li>The $$$3, 6, 5$$$ in the third, fourth, and fifth
    boxes end up in one of the following orders, each with probability
    $$$\frac{1}{6}$$$:
    <ul>
      <li>$$$3, 6, 5$$$</li>
      <li>$$$3, 5, 6$$$</li>
      <li>$$$6, 3, 5$$$</li>
      <li>$$$6, 5, 3$$$</li>
      <li>$$$5, 3, 6$$$</li>
      <li>$$$5, 6, 3$$$</li>
    </ul>
  </li>
</ul>
<p>
  So, for example, the probability of the bump leaving the balls in the
  order $$$1, 2, 3, 5, 6, 4$$$ is $$$\frac{1}{12}$$$. If
  Goro got this or some other non-sorted result, he
  would have to designate a set of box colors for the next round, and so on, until
  he eventually arrives at the sorted $$$1, 2, 3, 4, 5, 6$$$. Goro can assign
  colors to boxes in any way before each bump, regardless of previous assignments.
</p><p>
  Can you help Goro implement a better strategy that will efficiently sort the balls?
  It is guaranteed that the balls start in a random non-sorted order.
</p>

<h3>Input and output</h3>
<p>
  This is an interactive problem. You should make sure you have read the
  information in the Interactive Problems section of our
  <a href="https://codingcompetitions.withgoogle.com/codejam/faq" target="_blank">FAQ</a>.
</p><p>
  Initially, your program should read a single line containing three integers,
  $$$\mathbf{T}$$$ $$$\mathbf{N}$$$ $$$\mathbf{K}$$$: the number of test cases, the number of boxes per test
  case, and the total number of bumps allowed for all test cases combined.
  Then, $$$\mathbf{T}$$$ test cases must be processed.
</p><p>
  Each test case begins with the judge sending one line with $$$\mathbf{N}$$$ integers,
  with each integer from $$$1$$$ to $$$\mathbf{N}$$$ appearing exactly once, and with the
  list chosen at random from all non-sorted lists. Then you must engage in a series of
  interactions with the judge. Each interaction works as follows:
</p>
<ul>
  <li>
      You send one line of $$$\mathbf{N}$$$ integers $$$C_1, C_2, \dots, C_{\mathbf{N}}$$$, in which each
      integer is between $$$1$$$ and $$$\mathbf{N}$$$, inclusive. Each $$$C_i$$$ represents
      that you are assigning color $$$C_i$$$ to box $$$i$$$ for the next bump.
      You may choose how many colors there are and how they are numbered, but you must
      assign a color to each box.
  </li><li>
      The judge simulates the bump as explained in the statement.
      If this results in the balls being in sorted order:
      <ul>
        <li>
          If this interaction was the $$$\mathbf{K}$$$-th interaction across all test cases,
          and this was not the last test case, the judge sends one line with
          the integer $$$-1$$$ and does not output anything further.
        </li><li>
          Otherwise, the judge sends one line with the integer $$$1$$$ and
          then immediately begins the next test case, if there is one. If this
          was the last test case, your program must exit without error and
          without sending anything further.
        </li>
      </ul>
      <br>
  </li><li>
      Otherwise, the balls are not sorted, and:
      <ul>
         <li>
           If this interaction was the $$$\mathbf{K}$$$-th across all test cases, or if you
           provided an invalid line (e.g., too few integers, or color numbers
           out of range), the judge sends one line with the integer
           $$$-1$$$ and does not output anything further.
        </li><li>
          If this was not your $$$\mathbf{K}$$$-th interaction, the judge sends one line with
          the integer $$$0$$$, and then another line with $$$\mathbf{N}$$$ integers, with
          each integer from $$$1$$$ to $$$\mathbf{N}$$$ appearing exactly once, and in
          non-sorted order, representing the new order of the balls, that is, the
          $$$i$$$-th of these integers is the ball that fell into box $$$i$$$.
           Then you must begin another interaction.
        </li>
      </ul>
  </li>
</ul>
<p>
  As usual, if the memory limit is exceeded, or your program gets a runtime
  error, you will receive the appropriate judgment. Also, if your program
  continues to wait for the judge after receiving a $$$-1$$$, your program
  will time out, resulting in a Time Limit Exceeded error. Notice that it is
  your responsibility to have your program exit in time to receive a Wrong
  Answer judgment instead of a Time Limit Exceeded error.
</p><p>
  Be advised that the judge uses the same source of randomness each time, so
  in the absence of other errors (e.g. Time Limit Exceeded, Memory Limit
  Exceeded), submitting the exact same code twice will yield the same outcome
  twice.
</p>

<h3>Limits</h3>
<p>
Time limit: 20 seconds.<br/>
Memory limit: 1 GB.<br/>

$$$\mathbf{T} = 1000$$$.<br/>
$$$\mathbf{N} = 100$$$.<br/>
</p>

<h4>Test Set 1 (Visible Verdict)</h4>
<p>

$$$\mathbf{K} = 16500$$$.<br/>
</p>

<h4>Test Set 2 (Visible Verdict)</h4>
<p>

$$$\mathbf{K} = 12500$$$.<br/>
</p>

<h4>Test Set 3 (Visible Verdict)</h4>
<p>

$$$\mathbf{K} = 11500$$$.<br/>
</p>


<h3>Testing Tool</h3>
<p>
  You can use this testing tool to test locally or on our platform. To test
  locally, you will need to run the tool in parallel with your code; you can
  use our <a href="https://storage.googleapis.com/coding-competitions.appspot.com/interactive_runner.py">interactive runner</a>
  for that. For more information, read the instructions in comments in that
  file, and also check out the
  <a href="/codejam/faq#interactive-problems" target="_blank">Interactive Problems section</a>
  of the FAQ.
</p><p>
  Instructions for the testing tool are included in comments within the tool.
  We encourage you to add your own test cases. Please be advised that although
  the testing tool is intended to simulate the judging system, it is <b>NOT</b>
  the real judging system and might behave differently. If your code passes the
  testing tool but fails the real judge, please check the
  <a href="/codejam/faq#coding" target="_blank">Coding section</a>
  of the FAQ to make sure that you are using the same compiler as us.
</p><p>
<a href="local_testing_tool.py3" download="testing_tool.py">Download testing tool</a>
</p>


  <div class="sample-interaction-wrapper">
    <div class="sample-interaction-header">
      <div class="sample-interaction-header-text">Sample Interaction</div>
    </div>
    <div class="sample-interaction-content">
      <div class="sample-interaction-judge-solution-labels">
        <div class="sample-interaction-judge-label">Judge</div>
        <div class="sample-interaction-solution-label">Solution</div>
      </div>
      
  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-block-section-label">Number of cases, number of boxes per case, number of interactions allowed across all cases<br>
</div>

  <div class="sample-interaction-judge-output-wrapper">
    <div class="sample-interaction-judge-output-box">
      <pre class="sample-interaction-judge-output-test">2 4 8
</pre>
    </div>
  </div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-block-section-label">Case 1<br>
</div>

  <div class="sample-interaction-judge-output-wrapper">
    <div class="sample-interaction-judge-output-box">
      <pre class="sample-interaction-judge-output-test">1 4 3 2
</pre>
    </div>
  </div>

  <div class="sample-interaction-judge-note">Judge gives this non-sorted list.<br>
</div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-solution-output-wrapper">
    <div class="sample-interaction-solution-output-box">
      <pre class="sample-interaction-solution-output-test">1 2 3 2
</pre>
    </div>
  </div>

  <div class="sample-interaction-solution-note">Solution assigns color 1 to the first box, color 2 to the second and fourth boxes, and color 3 to the third box.<br>
The judge trivially assigns the balls in the boxes of color 1 and 3 back to their original box, and randomly chooses whether to swap the balls in the second and fourth boxes. In this case, it does not swap them.<br>
</div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-judge-output-wrapper">
    <div class="sample-interaction-judge-output-box">
      <pre class="sample-interaction-judge-output-test">0
1 4 3 2
</pre>
    </div>
  </div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-solution-output-wrapper">
    <div class="sample-interaction-solution-output-box">
      <pre class="sample-interaction-solution-output-test">1 2 3 2
</pre>
    </div>
  </div>

  <div class="sample-interaction-solution-note">Solution does the same thing as before.<br>
This time the judge does happen to swap the 4 and the 2.<br>
</div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-judge-output-wrapper">
    <div class="sample-interaction-judge-output-box">
      <pre class="sample-interaction-judge-output-test">1
</pre>
    </div>
  </div>

  <div class="sample-interaction-judge-note">Judge indicates that this test case was solved, and immediately begins the next case.<br>
</div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-block-section-label">Case 2<br>
</div>

  <div class="sample-interaction-judge-output-wrapper">
    <div class="sample-interaction-judge-output-box">
      <pre class="sample-interaction-judge-output-test">2 1 4 3
</pre>
    </div>
  </div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-solution-output-wrapper">
    <div class="sample-interaction-solution-output-box">
      <pre class="sample-interaction-solution-output-test">4 4 4 4
</pre>
    </div>
  </div>

  <div class="sample-interaction-solution-note">Solution assigns all boxes color 4. Notice that it's OK to not have colors 1, 2, or 3.<br>
The judge chooses a new random order for the balls. Wow, what luck, they come out in order!<br>
</div>

  <div class="sample-interaction-block-spacer"></div>

  <div class="sample-interaction-judge-output-wrapper">
    <div class="sample-interaction-judge-output-box">
      <pre class="sample-interaction-judge-output-test">1
</pre>
    </div>
  </div>

  <div class="sample-interaction-judge-note">Judge indicates that this test case was solved, and sends no further output, because this was the last test case.<br>
Contestant solution should exit (with no error) to avoid a Time Limit Exceeded error.<br>
</div>

    </div>
  </div>


<p>
  Note that the sample interaction does not satisfy the constraints of any of
  the test sets. It is only presented to clarify the input and output format.
</p>

    </div>
  </body>
</html>
