
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam 2019 - Qualification Round</h3><h1>Analysis: You Can Go Your Own Way</h1><h3>Test set 1</h3>
<p>
  In the first test set, we can construct all possible paths from the northwest
  cell of the maze to the southeast cell using
  <a href="https://en.wikipedia.org/wiki/Backtracking">backtracking</a>, and see
  which of them satisfy our requirements (we know from the Output section that at
  least one answer exists). When we find one that works, we
  output it as an answer for the test and stop looking any furthter.
</p>
<h3>Test set 2</h3>
<p>
  Let's assess the number of possible paths from the northwest cell to the
  southeast cell. For a maze of size <b>N</b> by <b>N</b>, every possible valid
  path makes <b>N</b> - 1 moves to the east and <b>N</b> - 1 moves to the south.
  Notice that the order in which these moves are made does not matter &ndash;
  we will always arrive at the southeast cell after making all of them and we
  are guaranteed not to leave the maze in the process.
</p>
<p>
  So we need to make 2<b>N</b> - 2 moves total, out of which <b>N</b> - 1 are to
  the east and <b>N</b> - 1 are to the south, and the order does not matter.
  Using <a href="https://en.wikipedia.org/wiki/Combination">
  combinations</a>, we can see that there are
  <code>C(2<b>N</b> - 2, <b>N</b> - 1)</code> possible options. For <b>N</b>
  &le; 10 in the test set 1 there are at most 48620 available paths
  that we need to check. For test set 2, however, in which <b>N</b> = 100, there are
  <code>22750883079422934966181954039568885395604168260154104734000</code>
  (or approximately 2.28 &times; 10<sup>58</sup>)
  possible paths to take. This is too much to process in the time limit, so
  let's think of an alternative solution.
</p>
<p>
  We can think of a maze as a <a
    href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)">graph</a>,
  where the unit cells are nodes and there is an edge between every pair of
  nodes that represent neighboring cells. Now instead of moving between two
  neighboring cells, we will move between the corresponding nodes along the
  edge connecting them. Because we cannot reuse Lydia's moves, the edges that
  she used before are no longer available to us, and we remove them from the
  graph. After that, our problem of finding a valid path reduces to the problem
  of finding <i>any</i> path from the node representing the northwest cell to
  the node representing the southeast cell. This is a standard graph problem
  that can be solved using either
  <a href="https://en.wikipedia.org/wiki/Depth-first_search">Depth-first
    search</a> or
  <a href="https://en.wikipedia.org/wiki/Breadth-first_search">Breadth-first
    search</a> in <code>O(<b>N</b><sup>2</sup>)</code> time, which is fast
  enough to pass this test set.
</p>
<h3>Test set 3</h3>
<p>
  With <b>N</b> &le; 50000 now, we must think of a different approach to the
  problem.
</p>
<p>
  To solve this test set, let's just invert all of the moves in Lydia's path.
  That is, every time she moves east, let's move south, and every time she moves
  south, let's move east. For example, if Lydia's path is <code>EESSSESE</code>,
  then our path will be <code>SSEEESES</code>.
</p>
<p>
  Let's understand why this inverted path is a correct answer to the problem.
</p>
<p>
  First, notice that we still make <b>N</b> - 1 moves to the east and
  <b>N</b> - 1 moves to the south, so we will arrive at the southeast cell in
  the end as required, and we will not step out of the bounds of the maze.
</p>
<p>
  Now let's see why we will not reuse any of Lydia's moves. Suppose this is not
  the case, and we reuse a move from the position that is <code>X</code> moves
  to the east and <code>Y</code> moves to the south in some order from the
  northwest cell. Recall that the order of moves does not matter, and there may
  be many ways to get to this position, but all of them will require exactly
  <code>X</code> moves to the east and <code>Y</code> moves to the south. What
  will be the next move? We know that Lydia's next move is the <code>(X + Y +
  1)</code>-th symbol in the string representing her path (with indexing
  starting from one), and our next move is the <code>(X + Y + 1)</code>-th symbol in
  the string representing our path. But since our path string is an inverted
  version of Lydia's path string, we know that <code>(X + Y + 1)</code>-th
  symbols of the two strings will be different, which contradicts our assumption
  that we will have the same next move. By the same logic, we can see that the
  two paths will not reuse any other moves along the way.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>



    </div>
  </body>
</html>
