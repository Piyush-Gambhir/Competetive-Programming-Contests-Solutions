
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam 2020 - Round 3</h3><h1>Analysis: Naming Compromise</h1><h3>Test Set 1</h3>
<p>
  In Test Set 1, the limits are small enough that we might be tempted to just try lots of possible
  outputs and keep the best one. However, since there is no a priori limit on the output
  length, and we can use any of the English alphabet letters in the output, we need to think a
  little bit first. In addition, we have to actually implement the calculation of
  <a href="https://en.wikipedia.org/wiki/Levenshtein_distance" target="_blank">edit distance</a>,
  which we can learn about via various online resources, including that Wikipedia link.
</p><p>
  The distance between two strings of length up to 6 is at most 6, since we could just replace
  every character in the longer string (or an arbitrary one, if they are of the same length) to
  match the other string, and delete any excess. Moreover, the distance between two strings is
  never less than the absolute difference in length between them, because we would need to add
  at least that many characters to the shorter string (if one is indeed shorter) just to make it as
  long as the other string. It follows that the output should never be longer than 12 characters.
</p><p>
  In addition, if the output N contains a letter
  that is not present in either of the input strings, exchanging that letter in N for a letter
  contained in one of the inputs cannot increase either distance, which can be proven by induction
  by inspecting the recursive definition of edit distance. Therefore, we can limit our search
  to strings of length up to 12 over the alphabet {<code>X</code>, <code>Y</code>, <code>Z</code>}.
  There are less than a million candidates, and calculating the edit distance for such short
  strings is really efficient, so this is fast enough to solve Test Set 1.
</p><p>
  It is possible to prove tighter limits on the output, and this can drastically reduce the
  number of candidates and make the solution even faster. We leave the details to the reader, but
  consider whether we ever really need an answer longer than 6 letters. If we have
  <code>ABCDFG</code> and <code>ACDEFG</code>, for example, then instead of compromising on the
  seven-letter <code>ABCDEFG</code> by adding <code>E</code> to the first name and <code>B</code>
  to the second name, we could just as easily delete <code>B</code> from the first name and
  <code>E</code> from the second name, compromising on the shorter <code>ACDFG</code> instead.
</p>
<h3>Test Set 2</h3>
<p>
  For Test Set 2 we need to use some additional insights. The most important one is noticing
  that edit distance is actually a distance, and has typical properties of distances like
  being <a href="https://en.wikipedia.org/wiki/Reflexive_relation" target="_blank">reflexive</a>
  and satisfying
  the <a href="https://en.wikipedia.org/wiki/Triangle_inequality" target="_blank">
  triangle inequality</a>.
  Let e(s, t) denote the edit distance between two strings s and t. For an output N, we want
  e(<b>C</b>, N) + e(<b>J</b>, N) = e(<b>C</b>, N) + e(N, <b>J</b>) to be minimal.
  By the triangle inequality, e(<b>C</b>, <b>J</b>) is a lower bound on this quantity, and an
  achievable one. For example, we can set N equal to <b>C</b> since e(<b>C</b>, <b>C</b>) = 0.
</p><p>
  By the reasoning above, we need to find an N such that
  e(<b>C</b>, N) + e(N, <b>J</b>) = e(<b>C</b>, <b>J</b>)
  and |e(<b>C</b>, N) - e(N, <b>J</b>)| is as small as possible. Luckily, the definition
  of edit distance hints at a way of doing that. If the edit distance between <b>C</b> and <b>J</b>
  is d, it means that there is a path of d valid operations on <b>C</b> that results in it turning
  into <b>J</b>. Formally, there are d - 1 intermediate strings
  S<sub>1</sub>, S<sub>2</sub>, ..., S<sub>d - 1</sub> such that e(<b>C</b>, S<sub>i</sub>) = i
  and e(S<sub>i</sub>, <b>J</b>) = d - i. Therefore, it suffices to pick S<sub>d / 2</sub>. If d
  is odd, both rounding up and down work, since for both possibilities,
  |e(<b>C</b>, N) - e(N, <b>J</b>)| = 1.
</p><p>
  To find S<sub>1</sub>, S<sub>2</sub>, ..., S<sub>d - 1</sub>, we can use a common technique
  to reconstruct the path that achieves an optimal result as found via
  <a href="https://en.wikipedia.org/wiki/Dynamic_programming" target="_blank">
    dynamic programming</a> (DP).
</p><p>
  For example, let <b>C</b><sub>a</sub> be the prefix of length a of <b>C</b>
  and <b>J</b><sub>b</sub> be the prefix of length b of <b>J</b>. The usual
  algorithm to compute edit distance is based on a recursive definition of
  a function f(a, b) that returns e(<b>C</b><sub>a</sub>, <b>J</b><sub>b</sub>) (see the
  link from the previous section for details). Similarly, we can define g(a, b, k)
  as a fuction that returns e(<b>C</b><sub>a</sub>, <b>J</b><sub>b</sub>) and also
  a string S such that e(<b>C</b><sub>a</sub>, S) = k and
  e(<b>J</b><sub>b</sub>, S) = e(<b>C</b><sub>a</sub>, <b>J</b><sub>b</sub>) - k.
  The new function g can be defined with a similar recursion as f, and then memoized for
  efficiency. The details are left as an exercise for the reader.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>



    </div>
  </body>
</html>
