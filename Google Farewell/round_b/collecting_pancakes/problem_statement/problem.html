
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Coding Competitions Farewell Rounds - Round B</h3><h1>Collecting Pancakes</h1><h3>Problem</h3>
<p>
  Alice and Bob both have a sweet tooth, and they are going to play a game to
  collect pancakes. There are $$$\mathbf{N}$$$ pancake stacks lined up on the table
  labeled from $$$1$$$ to $$$\mathbf{N}$$$. The $$$i$$$-th stack has exactly $$$\mathbf{A_i}$$$ pancakes.
  Alice and Bob are going to collect pancakes by alternating turns claiming
  full stacks. For the first turn, Alice must choose a stack labeled between
  $$$\mathbf{L_a}$$$ and $$$\mathbf{R_a}$$$, inclusive, and claim it. Then, Bob must choose a stack
  labeled between $$$\mathbf{L_b}$$$ and $$$\mathbf{R_b}$$$, inclusive, and different from the one
  chosen by Alice, and claim it.
</p>
<p>
  In subsequent turns, each of them must choose an unclaimed stack that is adjacent
  to a stack they claimed themselves before. That is, for Alice to claim stack $$$i$$$
  on one of her turns other than the first, she must have claimed either
  stack $$$i-1$$$ or stack $$$i+1$$$ in one of her previous turns. The same is true for Bob.
  If at some point there is no valid choice for either player, they skip that turn
  and claim no stack.
</p>
<p>
  The game ends when every stack is claimed. At that point, Alice collects all pancakes
  from all stacks she claimed, and Bob collects all pancakes in all stacks he claimed.
</p><p>
  Alice wants to get as many pancakes as possible for herself, and Bob wants to get
  as many pancakes as possible for himself.
  Can you help Alice find out the maximum number of pancakes she can collect
  if they both play optimally?
</p>

<h3>Input</h3>
<p>
  The first line of the input gives the number of test cases, $$$\mathbf{T}$$$. $$$\mathbf{T}$$$ test
  cases follow. Each test case consists of three lines.
</p>
<p>
  The first line of each test case contains an integer $$$\mathbf{N}$$$, representing the
  number of pancake stacks.
</p>
<p>
  The second line contains $$$\mathbf{N}$$$ integers $$$\mathbf{A_1}, \mathbf{A_2}, \dots, \mathbf{A_N}$$$, where
  $$$\mathbf{A_i}$$$ denotes the number of pancakes in stack $$$i$$$.
</p>
<p>
  The third line contains $$$4$$$ integers $$$\mathbf{L_a}$$$, $$$\mathbf{R_a}$$$, $$$\mathbf{L_b}$$$, and $$$\mathbf{R_b}$$$, the
  inclusive ranges of pancake stack labels Alice and Bob can choose for their first turn,
  respectively.
</p>

<h3>Output</h3>
<p>
  For each test case, output one line containing
  <code>Case #$$$x$$$: $$$y$$$</code>, where $$$x$$$ is the test case number
  (starting from 1) and $$$y$$$ is the maximum number of pancakes Alice can
  collect after playing the game optimally.
</p>

<h3>Limits</h3>
<p>
Time limit: 30 seconds.<br/>
Memory limit: 2 GB.<br/>

  $$$1 \le \mathbf{T} \le 100$$$.<br />
  $$$1 \le \mathbf{A_i} \le 10^9$$$, for all $$$i$$$.<br />
  $$$1 \le \mathbf{L_a} \le \mathbf{R_a} \le \mathbf{N}$$$<br />
  $$$1 \le \mathbf{L_b} \le \mathbf{R_b} \le \mathbf{N}$$$<br />
  It is not the case that $$$\mathbf{L_a} \le \mathbf{L_b} = \mathbf{R_b} \le \mathbf{R_a}$$$. (Bob is guaranteed to be
  able to pick a stack for his first turn regardless of Alice's choice.)<br/>
</p>

<h4>Test Set 1 (Visible Verdict)</h4>
<p>

  $$$2 \le \mathbf{N} \le 100$$$.<br />
</p>

<h4>Test Set 2 (Visible Verdict)</h4>
<p>

  $$$2 \le \mathbf{N} \le 10^5$$$.<br />
</p>


  <h3>Sample</h3>
  <div class="problem-io-wrapper-new">
    <div class="sampleio-wrapper">
      <div class="sample-input">
        <div class="sample-header">
          <div class="sample-header-text">Sample Input</div>
          <div class="sample-header-download-button">
            <a href="collecting_pancakes_sample_ts1_input.txt" target="_blank" aria-label="Download">
              <i class="material-icons grey">save_alt</i>
            </a>
          </div>
          <div class="sample-header-copy-button" onclick="
              const copyText = document.getElementById('sample_input_0').textContent;
              const textArea = document.createElement('textarea');
              textArea.textContent = copyText;
              textArea.style.position = 'absolute';
              textArea.style.left = '-100%';
              document.body.append(textArea);
              textArea.select();
              document.execCommand('copy');
              textArea.remove();
              const copyPopup = document.getElementById('sample_input_copy_popup_0');
              copyPopup.classList.add('sample-header-copy-popup-shown');
              setTimeout(function(){ copyPopup.classList.remove('sample-header-copy-popup-shown'); }, 2000);
          " aria-label="Copy to clipboard">
            <i class="material-icons grey">content_copy</i>
            <span class="sample-header-copy-popup" id="sample_input_copy_popup_0">
              Copied!
            </span>
          </div>
        </div>
        <div class="sample-content">
          <pre class="sample-content-text" id="sample_input_0">3
5
30 50 40 20 10
1 2 4 5
5
20 20 80 10 10
1 4 2 5
4
90 10 10 10
1 4 1 4
</pre>
        </div>
      </div>
      <div class="sample-output">
        <div class="sample-header">
          <div class="sample-header-text">Sample Output</div>
          <div class="sample-header-download-button">
            <a href="collecting_pancakes_sample_ts1_output.txt" target="_blank" aria-label="Download">
              <i class="material-icons grey">save_alt</i>
            </a>
          </div>
          <div class="sample-header-copy-button" onclick="
              const copyText = document.getElementById('sample_output_0').textContent;
              const textArea = document.createElement('textarea');
              textArea.textContent = copyText;
              textArea.style.position = 'absolute';
              textArea.style.left = '-100%';
              document.body.append(textArea);
              textArea.select();
              document.execCommand('copy');
              textArea.remove();
              const copyPopup = document.getElementById('sample_output_copy_popup_0');
              copyPopup.classList.add('sample-header-copy-popup-shown');
              setTimeout(function(){ copyPopup.classList.remove('sample-header-copy-popup-shown'); }, 2000);
          " aria-label="Copy to clipboard">
            <i class="material-icons grey">content_copy</i>
            <span class="sample-header-copy-popup" id="sample_output_copy_popup_0">
              Copied!
            </span>
          </div>
        </div>
        <div class="sample-content">
          <pre class="sample-content-text" id="sample_output_0">Case #1: 120
Case #2: 100
Case #3: 90
</pre>
        </div>
      </div>
    </div>
  </div>

<p>
  In Sample Case #1, there are $$$5$$$ pancake stacks with $$$30, 50, 40, 20, 10$$$
  pancakes in them. Alice can choose the first or second stack at the beginning of
  the game, and Bob can choose the fourth or fifth stack to begin with. One way in which they
  both play optimally is:
</p>
<ol>
  <li>
    At the beginning, Alice claims stack $$$2$$$, then Bob claims stack $$$4$$$.
  </li>
  <li>
    Alice claims stack $$$3$$$ in her second turn, then Bob claims stack $$$5$$$ in his second turn.
  </li>
  <li>
    Alice claims stack $$$1$$$ in her third turn, then the game ends because all stacks have been
    claimed.
  </li>
</ol>
<p>
  At the end of the game, Alice claimed stacks $$$1, 2$$$, and $$$3$$$ and Bob claimed stacks
  $$$4$$$ and $$$5$$$. The number of pancakes Alice collects is $$$30+50+40=120$$$.
</p>
<p>In Sample Case #2, one way of optimal play is:</p>
<ol>
  <li>
    At the beginning, Alice claims stack $$$3$$$, then Bob claims stack $$$2$$$.
  </li>
  <li>
    Alice claims stack $$$4$$$ in her second turn, then Bob claims stack $$$1$$$ in his second turn.
  </li>
  <li>
    Alice claims stack $$$5$$$ in her third turn, then the game ends because all stacks have been
    claimed.
  </li>
</ol>
<p>The number of pancakes Alice collects is $$$80+10+10=100$$$.</p>
<p>
  In Sample Case #3, both can claim any stack in their first turn. Since stack $$$1$$$ is more
  valuable than everything else combined, Alice claims it before Bob does. Then, Bob
  can claim stack $$$2$$$, making Alice have to skip all her subsequent turns. Alice still
  finishes with $$$90$$$ pancakes and Bob with just $$$30$$$.
</p>

    </div>
  </body>
</html>
