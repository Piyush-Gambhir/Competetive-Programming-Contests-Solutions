
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2021 - Round G</h3><h1>Analysis: Staying Hydrated</h1><p>
  The <a href="https://en.wikipedia.org/wiki/Taxicab_geometry" target="_blank">Manhattan distance</a>
  between a point $$$P=(x,y)$$$ and an axis-parallel rectangle $$$R$$$ with the lower-left corner
  $$$(x_1,y_1)$$$ and the upper-right corner $$$(x_2,y_2)$$$ is
  $$$d(P,R)=\max(x_1 - x, x - x_2, 0) + \max(y_1 - y, y - y_2, 0)$$$. Intuitively, the first term
  represents the minimal horizontal movement from $$$P$$$ to the nearest point inside the
  $$$x$$$-interval $$$[x_1,x_2]$$$, which could be $$$0$$$ if $$$P$$$ itself is in that interval.
  Similarly, the second term represents the minimal vertical movement from $$$P$$$ to the nearest
  point inside the $$$y$$$-interval $$$[y_1,y_2]$$$.
</p>

<h3>
  Test Set 1
</h3>

<p>
  In this test set, the furnished area of the room is so small that we can afford testing every point
  $$$P=(x,y)$$$ in the range $$$-100 \le x,y \le 100$$$ and select the point with the smallest total
  distance to all rectangular objects. The time complexity of such a brute-force algorithm is
  $$$O(\mathbf{K}WH)$$$, where $$$\mathbf{K}$$$ is the number of input objects and $$$W$$$ and $$$H$$$ is the width and
  the height of the smallest
  axis-parallel rectangle covering all input rectangles. Note that it is not necessary to test any
  points outside this covering rectangle as moving from such a point towards the covering rectangle
  would reduce the distance to all input rectangular objects.
  The time complexity can be further improved to $$$O(\mathbf{K}(W + H))$$$ if we realize that the optimal
  $$$x$$$- and $$$y$$$-coordinates are in fact independent and can be calculated separately.
</p>

<h3>
  Test Set 2
</h3>

<p>
  In this test set, the furnished area of the room may be huge, therefore, even the improved version
  of the
  brute-force algorithm would be too slow. However, with a little bit of sorting, we can find the
  optimal location of the bottle without ever computing any distances.
</p>

<p>
  Let us consider finding the optimal $$$x$$$-coordinate of the bottle (the optimal
  $$$y$$$-coordinate can be found in the same way). Imagine that we are seeking the optimal location
  by sweeping the coordinate plane from left to right. Suppose we are currently at the position
  $$$x$$$ and let $$$a(x)$$$ be the number of rectangles that are strictly ahead of $$$x$$$, i.e.
  $$$x \lt x_1$$$, where $$$x_1$$$ is the left coordinate of the rectangle. Simlarly, let $$$b(x)$$$
  be the number of rectangles that are behind $$$x$$$ in the non-strict sense, namely,
  $$$ x_2 \le x$$$. Now, if $$$a(x) \gt b(x)$$$, then $$$x$$$ is not the optimal location as moving
  one step to the right would reduce the total horizontal distance to the rectangles by
  $$$a(x)-b(x) \gt 0$$$.
</p>

<p>
  What happens to the value of $$$a(x)-b(x)$$$ as we sweep the plane from left to right? For a
  sufficiently small $$$x$$$, which is strictly to the left from all rectangles, $$$a(x)=\mathbf{K}$$$ and
  $$$b(x)=0$$$, and therefore, $$$a(x)-b(x) = \mathbf{K} \gt 0$$$. Conversely, for a sufficiently large
  $$$x$$$, it is the other way around and $$$a(x)-b(x) = -\mathbf{K} \lt 0$$$. And since $$$a(x)$$$ is
  a decreasing function while $$$b(x)$$$ is an increasing function, the difference $$$a(x)-b(x)$$$
  is also a decreasing function. What does it mean for our plane sweeping approach? As long as
  $$$a(x)-b(x) \gt 0$$$, we should keep moving to the right as, by doing so, we are reducing the
  total distance to the rectangles. But as soon as $$$a(x)-b(x) \le 0$$$, we have found the optimal
  $$$x$$$-coordinate, since further reduction of the total distance is not possible.
</p>

<p>
  In summary, we have reduced the task of calculating the optimal Manhattan distance to finding
  the smallest $$$x$$$ with $$$a(x)-b(x) \le 0$$$. This can be done by iterating through the left
  and right
  coordinates of rectangles in sorted non-decreasing order and maintaining the values of
  functions $$$a(x)$$$ and $$$b(x)$$$. The time complexity of this algorithm is dominated by the
  sorting, and is therefore $$$O(\mathbf{K} \log \mathbf{K})$$$.
</p>

<p>
  Left as an exercise to the reader: This problem can also be solved in $$$O(\mathbf{K})$$$ by using
  <a href="https://en.wikipedia.org/wiki/Selection_algorithm"> linear-time selection algorithms</a>.
  Though both our test sets should pass with the above $$$O(\mathbf{K} \log \mathbf{K})$$$ approach.
</p>

  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>


    </div>
  </body>
</html>
