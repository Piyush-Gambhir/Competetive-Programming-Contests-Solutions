
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2021 - Round C</h3><h1>Analysis: Rock Paper Scissors</h1><h3>
  Test Set 1
</h3>
<p>
  We could observe that it is easy to calculate the expected value of a certain strategy by iterating
  through all the choices you make every day and adjust your friend's probabilities of picking different
  choices accordingly. Therefore, we could start from some naive strategy to maximize our chance of
  winning, one strategy would be something like <code>RSPRSPRSP$$$\dots$$$</code>, and calculate its
  expected value. If such
  strategies cannot reach our expected bonus value, we could try to create a random strategy instead,
  calculate its expected value of bonus, and do so repeatedly until we find a strategy of which the
  expected bonus is at least $$$\mathbf{X}$$$. This approach is enough to solve the first test set.
</p>
<h3>
  Test Set 2
</h3>
<p>
  For the second test set, since the maximum value of $$$\mathbf{X}$$$ is raised, the method for Test Set 1 will
  exceed the time limit. Therefore we should find a more efficient way to look for a better strategy
  other than randomly generating them. We could first utilize what we have tried in the first test set,
  generating some random strategies, and pick the one with the best expected bonus as our base strategy $$$S$$$.
  We then randomly pick a day in $$$S$$$, and try to change the decision of that day and get a new strategy $$$S'$$$.
  If the expected bonus of the new strategy $$$E($$$S'$$$)$$$ is higher than that of the original $$$E($$$S$$$)$$$,
  we could substitute $$$S$$$ with $$$S'$$$ as our best strategy. By keep performing this substitution process,
  it is obvious the expected value of our strategy will be either increasing or reach a local maximum.
  Thus we could utilize this method, also known as
  <a href="https://en.wikipedia.org/wiki/Hill_climbing" target-"_blank"> hill climbing</a>,
  to find a strategy which has an expected value larger than $$$\mathbf{X}$$$.
  Note that since what we find here is a local maximum, it is possible that we would eventually find
  out that the best stratgy derived from $$$S$$$ cannot reach the value of $$$\mathbf{X}$$$. In that case we have to
  reselect the initial $$$S$$$ and perform another substitutiton process.
</p>
<h3>
  Test Set 3
</h3>
<p>
  For the last test set, the methods we applied in the previous test sets could not find us a
  strategy in the given time limit. However we could try to solve the problem in a different angle.
  In this problem, we are targeting an expected bonus of $$$\mathbf{X}$$$. To simplify the problem, instead of
  finding a strategy to reach the targeted bonus, we can try to maximize the expected value we could
  get by using the best possible strategy we could have. This value will always be at least as large
  as $$$\mathbf{X}$$$ because the solution is guaranteed to exist in the problem statement.
  We could then use dynamic programming to solve this problem.
</p>
<p>
  Let $$$v[r][p][s]$$$ denote the maximum expected value you could get if you made exactly
  $$$r$$$ rocks, $$$p$$$ papers, and $$$s$$$ scissors in you strategy on the $$$N$$$-th day. We could
  first observe $$$r + p + s = N$$$, and that this value will be affected by the last decision
  you made in your strategy. For example, if you decide to choose rock on the last day, the expected
  value will be
<p>
  $$$v[r - 1][p][s] + \frac{p}{n - 1} \times \mathbf{W} + \frac{s}{n - 1} \times \mathbf{E}$$$.
</p>
<p>
  Similarly, this can be applied to choosing paper or scissors as the last decision. Thus we could
  conclude that
  <div style="text-align: center">
    $$$\begin{split}
      v[r][p][s] & = & \max & (v[r - 1][p][s] + \frac{p}{n - 1} \times \mathbf{W} + \frac{s}{n - 1} \times \mathbf{E}, \\
                 & & &         v[r][p - 1][s] + \frac{s}{n - 1} \times \mathbf{W} + \frac{r}{n - 1} \times \mathbf{E}, \\
                 & & &         v[r][p][s - 1] + \frac{r}{n - 1} \times \mathbf{W} + \frac{p}{n - 1} \times \mathbf{E}) \\
    \end{split}$$$
  </div>
    We then get the function for state transfomation. As for the starting condition, since on the first
  day our friend's decision is totally random, we could easily have
  <div style="text-align: center">
    $$$v[1][0][0] = v[0][1][0] = v[0][0][1] = \frac{1}{3}\mathbf{W} + \frac{1}{3}\mathbf{E} $$$
  </div>
  Finally, to get the whole strategy to achieve the maximum bonus, we could record the last decision
  we made with another array $$$step[i][j][k]$$$, and backtrace it when we found the final value at
  $$$\max(v[i][j][k])$$$ where $$$i + j + k = 60$$$.
</p>
<p>
  We could do some brief analysis on the time and space complexity here. Notice that since in our
  dynamic programming process, if we want to find the optimal strategy for the $$$N$$$-th day,
  we will need to calculate all the states where $$$i + j + k \leq N$$$, which means
  that the space we are using will be $$$O(\binom{N}{3}) = O(N^3)$$$. As for the time complexity, since our
  transformation is constant, the dynamic programming process will be $$$O(\binom{N}{3}) = O(N^3)$$$.
  In our problem, where $$$N = 60$$$, such complexity is sufficient for our solution to find out the
  strategy in the given time limit.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>


    </div>
  </body>
</html>
