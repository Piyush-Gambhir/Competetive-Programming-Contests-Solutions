
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2020 - Round E</h3><h1>Analysis: Golden Stone</h1><p>
  The given set of junctions and streets can be considered as an undirected graph.
  The problem statement guarantees that the graph is connected.
</p>
<p>
  We can consider all possible combinations of junctions and stones, and try to figure out the optimal cost
  of making that stone at that junction. Let's define the cost of gathering stone <i>c</i> at junction
  <i>j</i> as Cost<sub>j,</sub> <sub>c</sub>.
  Then the solution would be the minimum of Cost<sub>junction,</sub> <sub>golden</sub>
  over all the junctions.
</p>
<h3>Test set 1</h3>
<p>
  We can consider a new graph, where each {junction, stone type} combination is a vertex,
  and for each street {u,v} in the given input, there will be <b>S</b> new edges {(u,c), (v,c)},
  one for each stone type c.
  Then we can run a variation of <a href="https://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm">Bellman-Ford algorithm</a>
  on this graph to fill the two dimensional cost table as mentioned above.
</p>
<p>
  Firstly, for all the stone
  types that are directly available at some junctions (as given in the input), the
  Cost<sub>junction,</sub> <sub>stone_type</sub> would be 0. All other combinations of junction and stone type
  will have initial cost set to infinity.
</p>
<p>
  Then we can try to relax the cost as in the classic Bellman-Ford algorithm, with some modification, that, in addition
  to relaxing edges, we also try to reduce cost by applying recipes on the stones that are available
  at the same junction at some point.
</p>
<p>
  For each junction <i>u</i>, we can relax the cost table as follows:
</p>
<ul>
  <li>For each edge <i>{v, u}</i> in the input graph, and stone type <i>c</i>,
    try to reduce the Cost<sub>u,</sub><sub>c</sub> by carrying one
    type <i>c</i> stone from <i>v</i> to <i>u</i>. </li>
  <li>Try to apply each recipe at the junction <i>u</i> to see if we can improve the
    Cost<sub>u</sub>, <sub>c</sub> where <i>c</i> is the stone produced by the recipe.</li>
</ul>
<p>
  We must repeat the relaxation steps mentioned above for each junction
  as long as there are any improvements made to the cost values. It can be proved that no more than
  <b>N</b> &times; <b>S</b> iterations are required.
</p>
<p>
  For the first type of relaxation,
  each {edge, stone type} combination is considered only once, and then the whole process is repeated
  O(<b>N</b> &times; <b>S</b>). So, ther overall complexity is O(<b>N</b> &times; <b>M</b> &times; <b>S</b><sup>2</sup>).
</p>
<p>
  For the second type of relaxation, the process takes O(<b>R</b>) time per junction, and the
  whole relaxation process will repeat O(<b>N</b> &times; <b>S</b>) times per junction.
  So the complexity is O(<b>N</b><sup>2</sup> &times; <b>S</b> &times; <b>R</b>).
</p>
<p>
  So, the total complexity of this approach is
  O(<b>N</b> &times; <b>S</b> &times; ((<b>M</b> &times; <b>S</b>) + (<b>N</b> &times; <b>R</b>))).
</p>

<h3>Test set 2</h3>
<p>
  Filling up the cost table can also be achieved with
  <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra's algorithm</a>.
  The cost table can be initialized in the same approach used in test set 1. Then
  the vertices with cost 0 are put into a minimum priority queue with the calculated cost as the key.
</p>
<p>
  At each step of trying to
  reduce cost for a vertex {<i>u</i>, <i>c</i>} from the queue, we can do the following:
</p>
<ul>
  <li>For each edge {<i>u</i>, <i>v</i>}, try to reduce the Cost<sub>v,</sub> <sub>c</sub> by carrying
    one type <i>c</i> stone from <i>u</i> to <i>v</i>. </li>
  <li>Try to reduce the Cost<sub>u,</sub> <sub>stone_type</sub> by applying recipes where <i>c</i>
    is an ingredient. </li>
</ul>
<p>
  In this approach, there are <b>N</b> &times; <b>S</b> vertices.
  For each edge in the
  input graph there will be corresponding <b>S</b> edges, so in total <b>M</b> &times; <b>S</b>
  edges.
</p>
<p>
  The relaxation of the first type follows classic Dijkstra's algorithm's style, so the complexity is
  O((<b>N</b> &times; <b>S</b> + <b>M</b> &times; <b>S</b>) &times; log(<b>N</b> &times; <b>S</b>)).
</p>
<p>
  For the relaxation of the second type for each vertex {<i>u</i>, <i>c</i>},
  we need to try only the recipes where <i>c</i> is an ingredient.
  So in total, for each junction, a recipe will be applied once for each of its ingredients.
  Each recipe has at most 3 ingredients. Which gives us additional
  O(<b>R</b> &times; <b>N</b> &times; log(<b>N</b> &times; <b>S</b>)) complexity. So the total time
  complexity of this approach is
  O((<b>N</b> &times; <b>S</b> + <b>M</b> &times; <b>S</b> + <b>R</b> &times; <b>N</b>) &times; log(<b>N</b> &times; <b>S</b>))
  which is sufficient for test set 2.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>


    </div>
  </body>
</html>
