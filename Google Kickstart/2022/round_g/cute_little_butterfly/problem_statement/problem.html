
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2022 - Round G</h3><h1>Cute Little Butterfly</h1><h3>Problem</h3>
<p>
  In a forest of the magical world, there lies a garden full of magical
  creatures. The garden has plenty of flowers which are not just beautiful but
  also a source of energy for butterflies.
</p>
<p>
  Consider the garden a 2D plane where the X-axis represents the ground, and the
  Y-axis represents the altitude. There are plants of infinite height on every
  non-negative integral point on the X-axis. There are $$$\mathbf{N}$$$ flowers in the
  garden, where the $$$i$$$-th flower is on the point ($$$\mathbf{X_i}$$$, $$$\mathbf{Y_i}$$$) with the
  nectar of some energy value $$$\mathbf{C_i}$$$.
</p>
<p>
  Our cute little butterfly wants as much energy as possible to become strong.
  By going to the same position of a flower, the butterfly can consume its nectar
  and gain that flower's energy value. Each flower's nectar can only be consumed once.
</p>
<p>
  The butterfly is initially at point $$$(0, 10^{18})$$$ with $$$0$$$ units of energy and
  facing towards the right.
  At any point, the butterfly can:
</p>

<ul>
  <li>Move to a lower altitude, that is, from $$$(x, y)$$$ to $$$(x, y-1)$$$ only if its current altitude is positive ($$$y > 0$$$).</li>
  <li>Move in the positive direction along the X-axis, that is, from $$$(x, y)$$$ to $$$(x+1, y)$$$ if it is facing right.</li>
  <li>Move in the negative direction along the X-axis, that is, from $$$(x, y)$$$ to $$$(x-1, y)$$$ if it is facing left.</li>
  <li>Change the direction it is facing (from left to right or vice versa). This will consume $$$\mathbf{E}$$$ units of energy.</li>
</ul>

<p>
  We know our butterfly is lazy, and it hates to move upwards during the
  journey. So, for this problem, we will assume that going upwards is not
  allowed. Also, energy can be negative at any point. Negative energy means
  the butterfly has spent more energy than it obtained from the flowers.
</p>

<p>Find the <i>maximum</i> energy our cute butterfly can achieve.</p>

<h3>Input</h3>
<p>
  The first line of the input gives the number of test cases, $$$\mathbf{T}$$$. $$$\mathbf{T}$$$ test
  cases follow.<br />
  The first line of each test case contains two integers, $$$\mathbf{N}$$$ and $$$\mathbf{E}$$$: the
  number of flowers and the energy required per turn, respectively.<br />
  The next $$$\mathbf{N}$$$ lines describe the flowers. The $$$i$$$-th line contains three
  integers, $$$\mathbf{X_i}$$$, $$$\mathbf{Y_i}$$$ and $$$\mathbf{C_i}$$$: the position and the energy value of the
  $$$i$$$-th flower, respectively.
</p>

<h3>Output</h3>
<p>
  For each test case, output one line containing
  <code>Case #$$$x$$$: $$$y$$$</code>, where $$$x$$$ is the test case number
  (starting from 1) and $$$y$$$ is the maximum overall energy our cute butterfly
  can achieve.
</p>

<h3>Limits</h3>
<p>
Memory limit: 1 GB.<br/>

  $$$1 \le \mathbf{T} \le 100$$$.<br />
  $$$0 \le \mathbf{E} \le 10^9$$$.<br />
  $$$1 \le \mathbf{C_i} \le 10^9$$$, for all $$$i$$$.<br />
  All flowers are located at distinct points.
</p>

<h4>Test Set 1</h4>
<p>
Time limit: 20 seconds.<br/>

  $$$1 \le \mathbf{N} \le 6$$$.<br />
  $$$0 \le \mathbf{X_i} \le 500$$$, for all $$$i$$$.<br />
  $$$0 \le \mathbf{Y_i} \le 500$$$, for all $$$i$$$.<br />
</p>

<h4>Test Set 2</h4>
<p>
Time limit: 40 seconds.<br/>

  $$$1 \le \mathbf{N} \le 10^3$$$.<br />
  $$$0 \le \mathbf{X_i} \le 500$$$, for all $$$i$$$.<br />
  $$$0 \le \mathbf{Y_i} \le 500$$$, for all $$$i$$$.<br />
</p>

<h4>Test Set 3</h4>
<p>
Time limit: 60 seconds.<br/>

  $$$0 \le \mathbf{X_i} \le 10^5$$$, for all $$$i$$$.<br />
  $$$0 \le \mathbf{Y_i} \le 10^9$$$, for all $$$i$$$.<br />
  For at most 10 cases:<br />
  $$$1 \le \mathbf{N} \le 10^5$$$.<br />
  For the remaining cases:<br />
  $$$1 \le \mathbf{N} \le 10^4$$$.<br />
</p>


  <h3>Sample</h3>
  <div class="problem-io-wrapper-new">
    <div class="sampleio-wrapper">
      <div class="sample-input">
        <div class="sample-header">
          <div class="sample-header-text">Sample Input</div>
          <div class="sample-header-download-button">
            <a href="cute_little_butterfly_sample_ts1_input.txt" target="_blank" aria-label="Download">
              <i class="material-icons grey">save_alt</i>
            </a>
          </div>
          <div class="sample-header-copy-button" onclick="
              const copyText = document.getElementById('sample_input_0').textContent;
              const textArea = document.createElement('textarea');
              textArea.textContent = copyText;
              textArea.style.position = 'absolute';
              textArea.style.left = '-100%';
              document.body.append(textArea);
              textArea.select();
              document.execCommand('copy');
              textArea.remove();
              const copyPopup = document.getElementById('sample_input_copy_popup_0');
              copyPopup.classList.add('sample-header-copy-popup-shown');
              setTimeout(function(){ copyPopup.classList.remove('sample-header-copy-popup-shown'); }, 2000);
          " aria-label="Copy to clipboard">
            <i class="material-icons grey">content_copy</i>
            <span class="sample-header-copy-popup" id="sample_input_copy_popup_0">
              Copied!
            </span>
          </div>
        </div>
        <div class="sample-content">
          <pre class="sample-content-text" id="sample_input_0">2
4 10
1 1 2
1 2 2
2 1 2
2 2 2
6 5
1 1 4
1 3 1
3 4 5
4 3 2
5 2 1
3 2 10
</pre>
        </div>
      </div>
      <div class="sample-output">
        <div class="sample-header">
          <div class="sample-header-text">Sample Output</div>
          <div class="sample-header-download-button">
            <a href="cute_little_butterfly_sample_ts1_output.txt" target="_blank" aria-label="Download">
              <i class="material-icons grey">save_alt</i>
            </a>
          </div>
          <div class="sample-header-copy-button" onclick="
              const copyText = document.getElementById('sample_output_0').textContent;
              const textArea = document.createElement('textarea');
              textArea.textContent = copyText;
              textArea.style.position = 'absolute';
              textArea.style.left = '-100%';
              document.body.append(textArea);
              textArea.select();
              document.execCommand('copy');
              textArea.remove();
              const copyPopup = document.getElementById('sample_output_copy_popup_0');
              copyPopup.classList.add('sample-header-copy-popup-shown');
              setTimeout(function(){ copyPopup.classList.remove('sample-header-copy-popup-shown'); }, 2000);
          " aria-label="Copy to clipboard">
            <i class="material-icons grey">content_copy</i>
            <span class="sample-header-copy-popup" id="sample_output_copy_popup_0">
              Copied!
            </span>
          </div>
        </div>
        <div class="sample-content">
          <pre class="sample-content-text" id="sample_output_0">Case #1: 6
Case #2: 17
</pre>
        </div>
      </div>
    </div>
  </div>

<p>
  In sample test case #1, there are $$$\mathbf{N} = 4$$$ flowers and $$$\mathbf{E} = 10$$$.
  To maximise the overall energy our butterfly can move in this way:
</p>
<p>
  <img
    src="images/sample_testcase_1.png"
    alt="Explanation for sample testcase 1"
  />
</p>
<ul>
  <li>Collect energy from the second flower. Total energy is now 2 units</li>
  <li>Collect energy from the fourth flower, by moving right. Total energy is now 4 units</li>
  <li>Collect energy from the third flower, by moving down. Total energy is now 6 units</li>
</ul>

<p>Hence, the total energy the butterfly got in this way is $$$6$$$ units.</p>

<p>
  In sample test case #2, there are $$$\mathbf{N} = 6$$$ flowers and $$$\mathbf{E} = 5$$$.
  To maximise the overall energy our butterfly can move in this way:
</p>
<p>
  <img
    src="images/sample_testcase_2.png"
    alt="Explanation for sample testcase 2"
  />
</p>
<ul>
  <li>Collect energy from the third flower. Total energy is now 5 units</li>
  <li>Collect energy from the fourth flower, by moving right and down. Total energy is now 7 units</li>
  <li>Collect energy from the fifth flower, by moving right and down. Total energy is now 8 units</li>
  <li>Change direction to left. Total energy is now 3 units</li>
  <li>Collect energy from the sixth flower, by moving left. Total energy is now 13 units</li>
  <li>Collect energy from the first flower, by moving left and down. Total energy is now 17 units</li>
</ul>

<p>Hence, the total energy the butterfly got in this way is $$$17$$$ units.</p>
</sampleio>

    </div>
  </body>
</html>
