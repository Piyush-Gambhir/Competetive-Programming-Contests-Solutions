
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2022 - Coding Practice with Kick Start Session #2</h3><h1>Analysis: Parcels</h1><p
  style="
    display: inline-block;
    padding: 5px;
    background-color: #f1f3f4;
    border: 2px solid #34a853;
  "
>
  <a href="https://youtu.be/PThnKCZ1ZDI?t=1021" target="_blank"
    >View problem and solution walkthrough video
  </a>
</p>
<h3>Test Set 1</h3>
<p>
  For Test Set 1, we are able to check all possible locations for the new
  delivery office in order to find the one that minimizes delivery time. We will
  do this in two stages. First, we will compute the delivery time for each
  square given the existing delivery offices. Second, we will try all possible
  locations for the new office. The precomputation in the first part will allow
  us to find the delivery time in the second part more efficiently.
</p>
<p>
  For the first stage, we compute the delivery time of a square by iterating
  over the entire grid and finding the minimum manhattan distance to a square
  that has a delivery office. This has a time complexity of $$$O(\mathbf{RC})$$$ per
  square for a total time complexity of $$$O((\mathbf{RC})^\mathbf{2})$$$.
</p>
<p>
  For the second stage, we iterate over all possible locations for the new
  delivery office and for each location, search the entire grid for the square
  with the maximum new delivery time. The new delivery time is the minimum of
  the delivery time computed in the first part and the manhattan distance to the
  new delivery office. This also has a time complexity of $$$O(\mathbf{RC})$$$ per
  delivery location for a total time complexity of $$$O((\mathbf{RC})^\mathbf{2})$$$, which is
  sufficient for Test Set 1.
</p>
<p>
  Alternatively, we could skip the first stage if we use a faster way of
  computing the delivery time for each square such as breadth-first search. See
  the next section for more details.
</p>
<h3>Test Set 2</h3>
<p>
  We can use a similar approach for Test Set 2, however we will need a more
  efficient way to compute the maximum delivery time for a new delivery
  location. We will do this by solving the following subproblem: given a value
  of $$$\mathbf{K}$$$, can we add a new delivery office so that the maximum delivery time is
  at most $$$\mathbf{K}$$$? The solution to this subproblem will be similar to Test Set 1,
  however having a target value of $$$\mathbf{K}$$$ allows us to identify exactly which
  squares need to be serviced by the new delivery office. We can use this
  difference to create a faster solution.
</p>
<p>
  Note that if the answer to the original problem is $$$\mathbf{K}$$$, then the answer to our
  subproblem will be <code>'No'</code> for values in the range [$$$1$$$,
  $$$\mathbf{K}$$$-$$$1$$$] and <code>'Yes'</code> for values in the range [$$$\mathbf{K}$$$,
  <code>infinity</code>]. For these kinds of subproblems, we can use binary
  search: if a given value works, then it is an upper bound for the answer;
  otherwise it's a strict lower bound for the answer. Hence, once we have a
  solution for the subproblem, we can use binary search to solve the original
  problem. This is a common technique to transform optimization problems into
  decision problems.
</p>
<p>
  First, we efficiently compute the existing delivery time of every square by
  inverting the problem: instead of finding the shortest distance to a delivery
  office for each square, we find the shortest distance to each square from a
  delivery office. This can be done using a multiple-source,
  <a target="_blank" href="https://en.wikipedia.org/wiki/Breadth-first_search">
    breadth-first search
  </a>
  starting at all of the delivery offices. A multiple-source BFS is the same as
  a regular BFS except that you use multiple starting locations instead of one.
  This search visits each square at most once, which gives us a time complexity
  of $$$O(\mathbf{RC})$$$.
</p>
<p>
  Second, we identify all of the squares which have a delivery time greater than
  $$$\mathbf{K}$$$ and then determine if there exists a location that is within a distance of
  $$$\mathbf{K}$$$ to each of these squares. In order to do this efficiently, we note that
  the manhattan distance has an equivalent formula:
</p>
<p>
  dist(($$$\mathbf{x_1}$$$, $$$\mathbf{y_1}$$$), ($$$\mathbf{x_2}$$$, $$$\mathbf{y_2}$$$)) = max(abs($$$\mathbf{x_1}$$$ + $$$\mathbf{y_1}$$$ - ($$$\mathbf{x_2}$$$ +
  $$$\mathbf{y_2}$$$)), abs($$$\mathbf{x_1}$$$ - $$$\mathbf{y_1}$$$ - ($$$\mathbf{x_2}$$$ - $$$\mathbf{y_2}$$$)))
</p>
<p>
  This formula is based on the fact that for any point, the set of points within
  a manhattan distance of $$$\mathbf{K}$$$ form a square rotated by $$$45$$$ degrees. The
  benefit of this formula is that if we fix ($$$\mathbf{x_2}$$$, $$$\mathbf{y_2}$$$), the distance will be
  maximized when $$$\mathbf{x_1}$$$ + $$$\mathbf{y_1}$$$ and $$$\mathbf{x_1}$$$ - $$$\mathbf{y_1}$$$ are either maximized or
  minimized.
</p>
<p>
  Hence, we can compute the maximum and minimum values of both $$$\mathbf{x_1}$$$ + $$$\mathbf{y_1}$$$ and
  $$$\mathbf{x_1}$$$ - $$$\mathbf{y_1}$$$ for all squares with a delivery time greater than $$$\mathbf{K}$$$. Then, we
  can try all possible locations for the new delivery office and check if the
  maximum distance from the location to a square with a current delivery time
  greater than $$$\mathbf{K}$$$ is at most $$$\mathbf{K}$$$ in constant time. Hence, we can check if the
  answer is at most $$$\mathbf{K}$$$ with a time complexity of $$$O(\mathbf{RC})$$$.
</p>
<p>
  With the binary search, the time complexity becomes $$$O(\mathbf{RC} \log
  (\mathbf{R}+\mathbf{C}))$$$, which is sufficient for the test set. There is a way to improve
  this to $$$O(\mathbf{RC})$$$ time by computing the min/max values mentioned above for
  all possible $$$\mathbf{K}$$$ in a single pass over the grid and then using casework to
  determine if a viable new delivery office location exists for each $$$\mathbf{K}$$$, but
  this optimization is unnecessary.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>


    </div>
  </body>
</html>
