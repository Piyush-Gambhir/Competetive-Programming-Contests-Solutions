
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2022 - Round E</h3><h1>Analysis: Pizza Delivery</h1><h3>
  Test Set 1
</h3>

<p>
  Since Ada does not have to deliver any pizzas in this test set, our task is simply to find the
  most profitable path of $$$\mathbf{M}$$$ steps starting from the location $$$(\mathbf{A_r},\mathbf{A_c})$$$. It is important
  to note that the functions $$$F_i(c)$$$ are
  <a href="https://en.wikipedia.org/wiki/Monotonic_function" target="_blank">increasing</a> given that
  $$$\mathbf{K_i} \ge 1$$$. In other words, to maximize the outcome of the functions, we should try
  maximizing the current number of coins $$$c$$$. Therefore, to find the profit of an optimal path
  of length $$$\mathbf{M}$$$ from $$$(\mathbf{A_r},\mathbf{A_c})$$$ to a specific location $$$(i,j)$$$, we must find optimal
  paths of length $$$\mathbf{M}-1$$$ to all of its neighbouring locations first, apply the respective toll
  functions $$$F$$$, and take the maximum outcome. And whenever we can reduce a problem to the
  same but smaller sub-problems, dynamic programming can help most of the time.
</p>
<p>
  Formally, let $$$DP_{i,j,t}$$$ be the maximum profit of a path of length $$$t$$$ from
  $$$(\mathbf{A_r},\mathbf{A_c})$$$ to the location $$$(i,j)$$$ and let $$$L_{i,j}$$$ be the neighbouring
  locations of $$$(i,j)$$$ ($$$|L_{i,j}| \le 4$$$). Then
<p/>
<p>
  $$$DP_{i,j,0}=\left\{
  \begin{matrix}
  0 & \textrm{if } (i,j)=(\mathbf{A_r},\mathbf{A_c}) \\
  -\infty & \textrm{otherwise}
  \end{matrix}\right.$$$
<p/>
<p>
  and
<p/>
<p>
  $$$DP_{i,j,t+1}=\max(DP_{i,j,t}, \max_{(i',j') \in L_{i,j}} DP_{i',j',t} \mathbf{OP_*} \mathbf{K_*})$$$.
<p/>
<p>
  For brevity, $$$\mathbf{OP_*} \mathbf{K_*}$$$ refers to the appropriate function $$$F$$$ when going from
  location $$$(i',j')$$$ to location $$$(i,j)$$$. Note that Ada can choose to not move at all, hence
  the term $$$DP_{i,j,t}$$$ in the recurrence above.
</p>
<p>
  The final answer is $$$\max_{1 \le i,j \le \mathbf{N}} DP_{i,j,\mathbf{M}}$$$.
  The time complexity for computing the entire $$$DP$$$ table is $$$O(\mathbf{N}^2\mathbf{M})$$$.
</p>

<h3>
  Test Set 2
</h3>

<p>
  In the case Ada actually has to deliver some pizzas, the problem can be solved in much the same
  way, except that we need to keep track of the pizzas that have been delivered already. So
  instead of asking, what is the best way to reach the location $$$(i,j)$$$ in $$$t$$$ steps, we
  are wondering, what is the best way to deliver a subset $$$S \subseteq \{1,2,\ldots,\mathbf{P}\}$$$ of
  pizzas in $$$t$$$ steps and end up in the location $$$(i,j)$$$. All we have to do is extend our
  $$$DP$$$ table by another dimension, namely, all the possible subsets $$$S$$$ of pizzas.
</p>

<p>
  Formally, let $$$DP_{i,j,S,t}$$$ be the maximum profit of delivering the subset of pizzas $$$S$$$
  in $$$t$$$ steps and ending up at the location $$$(i,j)$$$. Then
<p/>
<p>
  $$$DP_{i,j,S,0}=\left\{
  \begin{matrix}
  0 & \textrm{if } (i,j)=(\mathbf{A_r},\mathbf{A_c}) \textrm{ and } S=\emptyset \\
  -\infty & \textrm{otherwise}
  \end{matrix}\right.$$$.
<p/>
<p>
  As for the recurrence relation, we must account for Ada's choice to deliver pizzas after each
  step. If none of the customers in $$$S$$$ lives at the location $$$(i,j)$$$, then delivering
  a pizza after the next step is not an option, and our recurrence relation remains the
  same:
<p/>
<p>
  $$$DP_{i,j,S,t+1}=\max(DP_{i,j,S,t}, \max_{(i',j') \in L_{i,j}} DP_{i',j',S,t} \mathbf{OP_*} \mathbf{K_*})$$$.
<p/>
<p>
  However, if, say, customer $$$x$$$ lives at the location $$$(i,j)$$$ and $$$x \in S$$$, then Ada
  can choose to deliver their pizza after making the next step, therefore, our recurrence relation
  becomes
</p>
<p>
  $$$DP_{i,j,S,t+1}=\max(DP_{i,j,S,t}, DP_{i,j,S-\{x\},t}+\mathbf{C_x}, \max_{(i',j') \in L_{i,j}} DP_{i',j',S,t} \mathbf{OP_*} \mathbf{K_*}, \max_{(i',j') \in L_{i,j}} DP_{i',j',S-\{x\},t} \mathbf{OP_*} \mathbf{K_*} + \mathbf{C_x})$$$.
<p/>
<p>
  The final answer is $$$\max_{1 \le i,j \le \mathbf{N}} DP_{i,j,\{1,2,\ldots,\mathbf{P}\}, \mathbf{M}}$$$ and
  the time complexity of the algorithm is now $$$O(\mathbf{N}^2 2^\mathbf{P} \mathbf{M})$$$.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>


    </div>
  </body>
</html>
