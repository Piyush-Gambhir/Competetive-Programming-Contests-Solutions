
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2022 - Round C</h3><h1>Analysis: Ants on a Stick</h1><h3>Background</h3>

<p>
  The original "Ants on a Stick" is a
  <a target="_blank" href="https://math.hmc.edu/funfacts/ants-on-a-stick/">well-known</a> math
  question. The insight is that two identical ants bouncing off each other can
  be thought simply as the ants passing through each other.
</p>

<h3>Test Set 1</h3>

<p>
  Limits are small in Test Set 1 so we can perform a simulation. First, we
  create an array of length $$$2\mathbf{L}$$$ as the stick - each unit is 0.5 cm. The
  reason we split into 0.5 cm instead of 1 cm is to simplify collision that
  happens on half a cm. Also note that one position may have 2 ants when the
  collision happens, so take that into account for your array data structure.
</p>

<p>
  Then, place the ants on their respective starting positions. Now, we start to
  simulate with each iteration being half a second.
</p>

<p>
  Look at each position starting from the left, if there exists some ants, there
  are 3 cases to handle.
</p>

<ol>
  <li>
    If the ant is going to fall off (facing left on leftmost position or facing
    right on rightmost position), note down its ID and current time (iteration
    count), then remove it.
  </li>
  <li>
    If there is only one ant in that position, move it one unit according to its
    direction.
  </li>
  <li>
    If there are two ants in that position, reverse their direction and move it
    one unit according to its new direction.
  </li>
</ol>

<p>
  Implementation tip:
  <em>
    Use a new array to simulate the next iteration instead of modifying
    in-place. This makes it easier to understand and debug.
  </em>
</p>

<p>
  When there are no ants left on the stick, we sort the ants first by the time
  they fall, and then their ID.
</p>

<p>
  The time complexity for this solution is $$$O(\mathbf{L}^2)$$$, as we need
  $$$O(\mathbf{L})$$$ time for each iteration and there are at most $$$O(\mathbf{L})$$$
  iterations.
</p>

<p>
  The space complexity for this solution is also $$$O(\mathbf{L}^2)$$$ if you use a new
  array for each iteration, but can reduce to $$$O(\mathbf{L})$$$ by reusing the
  arrays. We keep just two arrays - $$$A_{current}$$$ for the current iteration
  and $$$A_{next}$$$ for the next iteration. Once an iteration is completed, we
  copy $$$A_{next}$$$ into $$$A_{current}$$$ and clear the content of
  $$$A_{next}$$$.
</p>

<h3>Test Set 2</h3>

<p>
  For Test Set 2, $$$\mathbf{L}$$$ gets too large so our previous solution will not
  work. We will now make use of the "pass-through" property discussed in the
  background section. Think of each ant initially having their own ID card.
  Instead of bouncing off and changing direction, they actually just exchange ID
  cards and politely pass through each other. With this observation, the problem
  becomes finding the order of ants falling and reporting the ID card they
  possess at that time.
</p>

<p align="center">
  <img src="assets/exchanging_id_v2.png" alt="Image showing how the ants exchange IDs" width="80%"/>
</p>

<p>
  Now we want to find all events of exchanging ID cards. An event is defined by
  $$$(x_1, x_2, t)$$$, meaning $$$x_1$$$ and $$$x_2$$$ exchange ID cards at time
  $$$t$$$. For an ant $$$x$$$ facing right, the ants which $$$x$$$ will exchange
  ID cards with are all those on the right of $$$x$$$ and are facing left.
</p>

<p>
  Once we have all the events of exchanging ID cards, we will sort them
  according to the time it happens. Suppose there are 2 ants that will exchange
  ID cards - $$$x_1$$$ with starting position $$$\mathbf{P_1}$$$ facing right, and
  $$$x_2$$$ with starting position $$$\mathbf{P_2}$$$ facing left. The time of the
  exchange is $$$(\mathbf{P_2}-\mathbf{P_1}) / 2$$$ seconds. Once we have the order of events,
  we will process each of them, by using an appropriate data structure (hash map
  or array with index as key) to keep track of the ID card possessed by each
  ant. Finally, we will have the ID cards of each ant of the time they fall off
  the stick.
</p>

<p>
  Our last piece is to figure out the order of ants falling. This is relatively
  straightforward. For an ant facing left with starting position $$$\mathbf{P_1}$$$,
  the time of falling is $$$\mathbf{P_1}$$$. For an ant facing right with position
  $$$\mathbf{P_2}$$$, the time of falling is $$$\mathbf{L}-\mathbf{P_2}$$$. Finally, print out the ID
  cards of the ants in this order.
</p>

<p>
  The time complexity for this solution is $$$O(\mathbf{N}^2\log \mathbf{N})$$$ to find all
  the events of exchanging cards and sorting them.
</p>

<h3>Test Set 3</h3>

<p>
  For Test Set 3, the additional observation is that just by the fact that there
  is an ant falling off the left end of the stick, we know it must be the
  current leftmost ant that is still on the stick. No exchanges of ID cards.
</p>

<p>
  For each ant, using the pass-through property, find the time it falls off the
  stick and in which direction. In the end we should have an array of length
  $$$\mathbf{N}$$$ of $$$(t,d)$$$, meaning the time and the direction an ant falls off.
</p>

<p>
  Finally, sort the ants by their starting position, and the fall off events by
  their time. For each fall off event, if it is on the left end, we print the ID
  of the leftmost ant and remove it, and vice versa for fall off event on the
  right end.
</p>

<p>The time complexity for this solution is $$$O(\mathbf{N}\log \mathbf{N})$$$.</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>


    </div>
  </body>
</html>
