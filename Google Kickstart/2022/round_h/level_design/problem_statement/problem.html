
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2022 - Round H</h3><h1>Level Design</h1><h3>Problem</h3>
<p>
  A <a href="https://mathworld.wolfram.com/PermutationCycle.html" target="_blank">permutation
  cycle</a> in a permutation $$$C$$$ is a sequence of integers $$$(a_1, a_2, \dots, a_k)$$$ such that
  the following hold:
  <ul>
    <li>$$$a_i \in C$$$ for all $$$i$$$, and are distinct.</li>
    <li>For each $$$i \in \{1, 2, \ldots, k-1\}$$$: $$$C[a_i] = a_{i+1}$$$, and $$$C[a_k] = a_1$$$.</li>
</ul>
</p>
<p>
  A permutation cycle of length $$$k$$$ is called a $$$k$$$-cycle.
</p>
<p>
  For example, the permutation $$$C = [4, 2, 1, 3]$$$ has two cycles: the $$$3$$$-cycle
  $$$(4, 3, 1)$$$, and the $$$1$$$-cycle $$$(2)$$$.  $$$(4, 3, 1)$$$ is a cycle because
  $$$C[4] = 3$$$, $$$C[3] = 1$$$, and $$$C[1] = 4$$$.
</p>
<p align="center">
  <img src="images/permutation_cycle.png" alt="Sample case."/>
</p>
<p>
  Grace loves permutation cycles, so Charles decides to design an $$$\mathbf{N}$$$-level game to challenge her.
</p>
<p>
  At the start of the game, the player is given an $$$\mathbf{N}$$$-length permutation $$$\mathbf{P}$$$ of integers from
  $$$1$$$ through $$$\mathbf{N}$$$.  The levels in the game are numbered from $$$1$$$ to $$$\mathbf{N}$$$.  At each level, the
  player starts with the <i>given</i> permutation, and is allowed to make modifications to it by
  swapping any two elements in it (multiple swaps allowed).  To clear the $$$k$$$-th level in the
  game, the player is required to find the <i>minimum</i> number of swaps using which a
  $$$k$$$-cycle can be created in the permutation.  The player can progress to the $$$(k+1)$$$-th
  level only after clearing the $$$k$$$-th level.
</p>
<p>
  Grace finds the game a bit challenging, but wants to win at any cost.  She needs your help!
  Formally, for each level $$$k$$$, you need to find the minimum number of swaps using which a
  $$$k$$$-cycle can be created in the permutation.
</p>

<h3>Input</h3>
<p>
  The first line of the input gives the number of test cases, $$$\mathbf{T}$$$. $$$\mathbf{T}$$$ test cases follow.<br/>
  The first line of each test case contains an integer $$$\mathbf{N}$$$: the length of the permutation.<br/>
  The next line contains $$$\mathbf{N}$$$ integers $$$\mathbf{P_1}$$$, $$$\mathbf{P_2}$$$, $$$\dots$$$, $$$\mathbf{P_N}$$$, where the $$$i$$$-th
  integer represents the $$$i$$$-th element in the permutation $$$\mathbf{P}$$$.
</p>

<h3>Output</h3>
<p>
  For each test case, output one line containing <code>Case #$$$x$$$: $$$S_1, S_2, \dots, S_N$$$</code>,
  where $$$x$$$ is the test case number (starting from 1), and $$$S_i$$$ is the solution for the
  $$$i$$$-th level in the game, that is, the minimum number of swaps needed to create an
  $$$i$$$-cycle in the permutation.
</p>

<h3>Limits</h3>
<p>
Time limit: 20 seconds.<br/>
Memory limit: 1 GB.<br/>

  $$$1 \le \mathbf{T} \le 100$$$.<br/>
  $$$1 \le \mathbf{P_i} \le \mathbf{N}$$$, for all $$$i$$$.<br/>
  All $$$\mathbf{P_i}$$$ are distinct.
</p>

<h4>Test Set 1</h4>
<p>

  $$$1 \le \mathbf{N} \le 10^3$$$.<br/>
</p>

<h4>Test Set 2</h4>
<p>

  $$$1 \le \mathbf{N} \le 10^5$$$.<br/>
</p>


  <h3>Sample</h3>
  <div class="problem-io-wrapper-new">
    <div class="sampleio-wrapper">
      <div class="sample-input">
        <div class="sample-header">
          <div class="sample-header-text">Sample Input</div>
          <div class="sample-header-download-button">
            <a href="level_design_sample_ts1_input.txt" target="_blank" aria-label="Download">
              <i class="material-icons grey">save_alt</i>
            </a>
          </div>
          <div class="sample-header-copy-button" onclick="
              const copyText = document.getElementById('sample_input_0').textContent;
              const textArea = document.createElement('textarea');
              textArea.textContent = copyText;
              textArea.style.position = 'absolute';
              textArea.style.left = '-100%';
              document.body.append(textArea);
              textArea.select();
              document.execCommand('copy');
              textArea.remove();
              const copyPopup = document.getElementById('sample_input_copy_popup_0');
              copyPopup.classList.add('sample-header-copy-popup-shown');
              setTimeout(function(){ copyPopup.classList.remove('sample-header-copy-popup-shown'); }, 2000);
          " aria-label="Copy to clipboard">
            <i class="material-icons grey">content_copy</i>
            <span class="sample-header-copy-popup" id="sample_input_copy_popup_0">
              Copied!
            </span>
          </div>
        </div>
        <div class="sample-content">
          <pre class="sample-content-text" id="sample_input_0">2
3
1 2 3
4
4 2 1 3
</pre>
        </div>
      </div>
      <div class="sample-output">
        <div class="sample-header">
          <div class="sample-header-text">Sample Output</div>
          <div class="sample-header-download-button">
            <a href="level_design_sample_ts1_output.txt" target="_blank" aria-label="Download">
              <i class="material-icons grey">save_alt</i>
            </a>
          </div>
          <div class="sample-header-copy-button" onclick="
              const copyText = document.getElementById('sample_output_0').textContent;
              const textArea = document.createElement('textarea');
              textArea.textContent = copyText;
              textArea.style.position = 'absolute';
              textArea.style.left = '-100%';
              document.body.append(textArea);
              textArea.select();
              document.execCommand('copy');
              textArea.remove();
              const copyPopup = document.getElementById('sample_output_copy_popup_0');
              copyPopup.classList.add('sample-header-copy-popup-shown');
              setTimeout(function(){ copyPopup.classList.remove('sample-header-copy-popup-shown'); }, 2000);
          " aria-label="Copy to clipboard">
            <i class="material-icons grey">content_copy</i>
            <span class="sample-header-copy-popup" id="sample_output_copy_popup_0">
              Copied!
            </span>
          </div>
        </div>
        <div class="sample-content">
          <pre class="sample-content-text" id="sample_output_0">Case #1: 0 1 2
Case #2: 0 1 0 1
</pre>
        </div>
      </div>
    </div>
  </div>


<p>
  In Sample Case #1, there are three $$$1$$$-cycles in the given permutation.  So, the first level
  can be cleared with zero swaps.  To clear the second level, we can swap the first two elements to
  get the permutation $$$[2, 1, 3]$$$, which contains the $$$2$$$-cycle $$$(2, 1)$$$.  To clear the
  third level, we can swap the first two elements, followed by the second and third elements to get
  the permutation $$$[2, 3, 1]$$$, which contains the $$$3$$$-cycle $$$(2, 3, 1)$$$.
</p>

<p>
  In Sample Case #2, as explained earlier, the permutation has the $$$1$$$-cycle $$$(2)$$$.  So,
  zero swaps are needed to clear the first level.  To clear the second level, we can swap the last
  two elements to get the permutation $$$[4, 2, 3, 1]$$$, which contains the $$$2$$$-cycle
  $$$(4, 1)$$$.   Since the permutation also has the $$$3$$$-cycle $$$(4, 3, 1)$$$, the third level
  can also be cleared using zero swaps.  To clear the fourth level, we can swap the second and the
  fourth elements to get the permutation $$$[4, 3, 1, 2]$$$, which contains the $$$4$$$-cycle
  $$$(4, 2, 3, 1)$$$.
</p>

    </div>
  </body>
</html>
