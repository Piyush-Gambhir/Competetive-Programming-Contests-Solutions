
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Kick Start 2022 - Coding Practice with Kick Start Session #3</h3><h1>Analysis: Wiggle Walk</h1><p
  style="
    display: inline-block;
    padding: 5px;
    background-color: #f1f3f4;
    border: 2px solid #34a853;
  "
>
  <a href="https://www.youtube.com/watch?v=E2icOW6Ntfo&t=335s" target="_blank"
    >View problem and solution walkthrough video
  </a>
</p>
<h3>Test set 1</h3>
<p>
    A naive approach to this problem is to simply simulate what has been mentioned in the problem statement.
    In other words, for each instruction, we will keep moving the robot in the specified direction until it reaches an unvisited square.
    This approach is going to have a time complexity of $$$O(\mathbf{N}^2)$$$, which is good enough for test set 1.
</p>
<h3>Test set 2</h3>
<p>
    For this test set, the naive approach will not be good enough. The problem with the naive approach is that it visits a lot of already visited squares.
    In cases such as when the input alternates continuously between <code>E</code> and <code>W</code>, each instruction will visit all the previously visited squares.
    We need a way to compute the destination square for each instruction faster to reduce the complexity.
</p>
<p>
    Let us use intervals to represent all the contiguous segments of visited squares in the same row. For example, if in a row $$$r$$$ the robot has already visited squares $$$(r, 3)$$$, $$$(r, 5)$$$, $$$(r, 6)$$$, and $$$(r, 7)$$$,
    the visited squares in this row can be represented with the intervals $$$(3, 3)$$$ and $$$(5, 7)$$$.
</p>
<p>
    With that in mind, consider we have a <a href="https://en.wikipedia.org/wiki/Set_(abstract_data_type)">set</a> of intervals for each row and each column of the grid to represent all the squares that have been visited in that particular row or column.
    Let us call them interval-sets. Initially, the robot has only visited the starting squares ($$$\mathbf{S_R}$$$, $$$\mathbf{S_C}$$$) it started in, so all these sets are empty except for the set corresponding to row $$$\mathbf{S_R}$$$, which has a single interval ($$$\mathbf{S_C}$$$, $$$\mathbf{S_C}$$$), and the set corresponding to the column $$$\mathbf{S_C}$$$, which has a single interval ($$$\mathbf{S_R}$$$, $$$\mathbf{S_R}$$$).
</p>
<p>
    Using this data structure, we can quickly find the destination square for the robot for each instruction.
    Let the robot be located at $$$(r, c)$$$. For each instruction, we will look at the interval-set corresponding
    to the row $$$r$$$ (if the instruction is <code>W</code> or <code>E</code>) or column $$$c$$$ (if the instruction is <code>N</code> or <code>S</code>).
    Then, we will find the interval in this set that contains the robot's current position (there is guaranteed be one, because the square the robot is currently in is already considered to be visited).
    Once we find that interval, we will immediately know the location of the next unvisited squares in either direction, as they will be first row or column that lies outside of that interval.
</p>
<p>
    For example, let the robot be located in square $$$(2, 6)$$$ and the next instruction is <code>W</code>.
    Let the interval set for row $$$2$$$ be $$$(3, 3)$$$ and $$$(5, 7)$$$. The robot is currently located at column $$$6$$$, which is inside the interval $$$(5, 7)$$$.
    From this, we know that the next unvisited square in the west is $$$(2, 4)$$$, and the next unvisited square in the east is $$$(2, 8)$$$. As the instruction is <code>W</code>, the robot will move to square $$$(2, 4)$$$.
</p>
<p>
    All that remains now is to find a way to update our interval-sets suitably whenever the robot visits a new square. Let $$$(r, c)$$$ be the newly visited square.
    This can be done by updating the interval-set for both row $$$r$$$ and column $$$c$$$. For both interval-sets, we will check if any existing intervals are next to the newly visited square:
</p>
<ul>
    <li>If there are two intervals adjacent to the newly visited square on both sides, we will merge these two intervals into one.</li>
    <li>If there is one interval adjacent to the newly visited square, we will extend this interval by 1 to include the newly visited square.</li>
    <li>Otherwise, we will add a new interval of length 1 containing just the newly visited square.</li>
</ul>
<p>
    Since we add at most one interval in each case, the number of intervals is $$$O(\mathbf{N})$$$. Since all operations are about finding/inserting/removing a single interval, all of those can be handled easily in $$$O(log(\mathbf{N}))$$$ time. So the overall run time of this approach is $$$O(\mathbf{N}log(\mathbf{N}))$$$.
    There is also a $$$O(\mathbf{N})$$$ solution to this problem using hash tables. It is left as an exercise to the reader.
</p>


  <div class="test-data-download-wrapper">
    <div class="test-data-download-header">
      <div class="test-data-download-header-text">Test Data</div>
      <div class="test-data-download-header-download-button">
        <a href="test_data.zip" target="_blank">
          <i class="material-icons grey">save_alt</i>
        </a>
      </div>
    </div>
    <div class="test-data-download-content">
      <div class="test-data-download-warning">
        <span class="material-icons" style="color: grey; vertical-align: middle;">info</span>
        <span style="vertical-align: middle;">We recommend that you practice debugging solutions without looking at the test data.</span>
      </div>
    </div>
  </div>


    </div>
  </body>
</html>
