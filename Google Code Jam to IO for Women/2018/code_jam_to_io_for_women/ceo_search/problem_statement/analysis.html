
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam to I/O for Women 2018 - Code Jam to I/O for Women</h3><h1>Analysis: CEO Search</h1><h2>CEO Search: Analysis</h2>
<h3>Small dataset</h3>
<p>
  In the Small dataset, there are at most 10 existing employees, so one viable
  approach is as follows. We will start by supposing that the new CEO has the
  minimum experience level possible: one level higher than the highest level
  among all existing employees. Then, we can check all possible assignments of
  employees to potential managers of higher levels than those employees.
  (Throughout this analysis, for convenience, we will use "manager" to mean
  "direct manager"). If any of the assignments is valid &mdash; that is, nobody
  is managing too many employees &mdash; then we have solved the problem.
  Otherwise, we try again with a CEO of one level higher, and so on. This
  process is bounded, since the answer cannot possibly be larger than 11; the
  existing employees are all level 10 or lower, so a level 11 CEO could manage
  all of them personally.
</p><p>
  At first, it may seem that the search space is too large. When we have one
  employee of each level between 1 and 10, for example, and we try to add a
  new CEO of level 11, there are 10! possible sets of assignments. (The level
  1 employee has 10 potential managers, the level 2 employee has 9 potential
  managers, and so on.) But the cases like this one with large search spaces
  are also easy to solve; note that any assignment is valid in our example,
  since it is impossible to give a manager too many employees. On the other
  hand, when we have a case like five level 0s, four level 1s, and one level 2,
  and we try to add a new CEO of level 3, it turns out that no set of
  assignments is valid... but there are so few possible sets of assignments
  that it is easy to check them all and move on to trying a new CEO of level 4.
</p>
<h3>Large dataset</h3>
<p>
  Suppose that we have chosen a new CEO of some level (which may or may not
  turn out to work), and we have started trying to assign managers in some way;
  not everyone necessarily has a manager yet. Suppose that an employee A of
  level L<sub>A</sub> is managing an employee B of level L<sub>B</sub>, and
  there is some other employee C of level L<sub>C</sub> (not managed by A) such
  that L<sub>A</sub> &gt; L<sub>C</sub> &gt; L<sub>B</sub>. Then we can safely
  have A manage C instead of B. If employee C previously had a manager D, that
  manager is of a high enough level to manage employee B, so we can have D
  manage B and we are no worse off than before. If employee C did not yet have
  a manager, then we are better off than before. The same logic holds if
  employee B stands for an empty space rather than an employee.
</p><p>
  This observation suggests a top-down approach to the problem. We can work
  from the highest-level employees to the lowest-level ones, and apply a simple
  rule: each employee should manage as many other employees as they can, and
  those employees should be of the highest levels available among all remaining
  unmanaged employees.
</p><p>
  We can simplify this approach by thinking in terms of levels instead of
  employees. We will start at the top level, which has the new CEO of level
  X; the new CEO creates X management "slots". Then, let us consider the next
  highest level, which has <b>N<sub>L</sub></b> employees of level
  <b>E<sub>L</sub></b>. If <b>N<sub>L</sub></b> &gt; X, then our plan does not
  work and we need a CEO with a higher level. Otherwise, we have used up
  <b>N<sub>L</sub></b> of our X slots, but the employees from this level have
  added <b>N<sub>L</sub></b> &times; <b>E<sub>L</sub></b> more slots. We can
  continue in this way, abandoning a plan whenever we do not have enough slots
  to manage all of the employees at a given level.
</p><p>
  For the Large dataset, the CEO level may be as large as the largest possible
  <b>N<sub>i</sub></b> value plus 1, so we may not have time to check all of
  them. We can speed up the process by
  <a href="https://en.wikipedia.org/wiki/Binary_search_algorithm">binary searching</a>
  on the level of our new CEO, with an inclusive lower bound equal to
  <b>E<sub>L</sub></b> + 1, and an inclusive upper bound equal to the lower
  bound or the maximum <b>N<sub>i</sub></b> allowed by the problem, whichever
  is greater. (If there are 10<sup>12</sup> level 0 employees, for example, the
  answer could be as large as 10<sup>12</sup>.) If we try a possible value and
  find that it works, we can make that value our new upper bound; if a value
  does not work, we can set the lower bound to that value plus 1. Each search
  takes O(<b>L</b>) time, and the binary search adds another factor of
  log(max(<b>N<sub>i</sub></b>)), so the running time is
  O(<b>L</b> &times; log(max(<b>N<sub>i</sub></b>))).
</p><p>
  This is fast enough to solve the Large dataset, but we can do even better by
  cutting out the binary search entirely! We can proceed through the levels as
  before, but without including the new CEO or trying to guess their level.
  Whenever we encounter employees with no possible managers, we add them to a
  count and then move on. (This is definitely the case for every employee of
  level <b>E<sub>L</sub></b>, and it may be true of employees at other levels
  as well.) The final answer is then either that count (since all of those
  unmanaged employees must be personally managed by the new CEO), or
  <b>E<sub>L</sub></b> + 1, whichever is greater.
</p><p>
  It is also possible to work from the bottom up instead, using the same idea,
  or to apply <a href="https://en.wikipedia.org/wiki/Hall%27s_marriage_theorem">Hall's theorem</a> to get a closed-form expression of the solution; we leave
  those as exercises. In any case, our running time is now O(<b>L</b>).
</p>

    </div>
  </body>
</html>
