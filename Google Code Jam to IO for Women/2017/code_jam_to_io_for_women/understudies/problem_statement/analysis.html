
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam to I/O for Women 2017 - Code Jam to I/O for Women</h3><h1>Analysis: Understudies</h1><h2>Understudies: Analysis</h2>

<h3>Small dataset</h3>
<p>
  There can be at most four roles and eight performers in a Small test case. We
  could write code to enumerate all of the different ways to pair up the
  performers, but this can be tricky to get right; however, the limits allow an
  even easier brute-force solution. It is simple to generate all possible
  permutations of performers using, for example, Python's
  <code>itertools.permutations</code>. For each permutation, we can pair the
  first performer in the list with the second, the third with the fourth, and
  so on, and then check the overall success probability in the way described in
  the sample case explanations. The maximum probability we encounter is the
  answer. This method will check equivalent casting decisions multiple times,
  but it doesn't matter; 8! is under 50 thousand, so your computer should not
  even break a sweat.
</p>
<h3>Large dataset</h3>
<p>
  Brute force will not cut it for a musical with up to 40 roles &mdash; we
  must be giving <i>Cats</i> and <i>A Chorus Line</i> a run for their money!
  &mdash; so we need a more thoughtful strategy. Is it better to pair up
  reliable performers with other reliable performers, making some roles secure
  and others risky? Or should we pair our most reliable performers with our
  least reliable ones, spreading out the risk more evenly across roles? Or is
  the solution something more complex? Intuition can easily fool us when it
  comes to probability problems, so it's best to make a mathematical argument.
</p><p>
  Suppose that we have paired up our performers in some arbitrary way. Let's
  consider two of the roles and the four performers. Without loss of
  generality, let's label the four performers A, B, C, and D, such that their
  probabilities of becoming unavailable follow the order P<sub>A</sub> &ge;
  P<sub>B</sub> &ge; P<sub>C</sub> &ge; P<sub>D</sub>. Our key claim is that we
  will maximize these four performers' contribution to the overall probability
  of the show's success by pairing A with D and B with C, if they are not
  already paired in that way.
</p><p>
  Let's prove that pairing A with D is better than pairing A with C. If we pair
  A with D, the probability that both of these roles will be successfully
  filled is as follows:
</p><p>
  (1 - P<sub>A</sub>P<sub>D</sub>)(1 - P<sub>B</sub>P<sub>C</sub>) =
  1 - P<sub>A</sub>P<sub>D</sub> - P<sub>B</sub>P<sub>C</sub> +
  P<sub>A</sub>P<sub>B</sub>P<sub>C</sub>P<sub>D</sub>.
</p><p>
  If we instead pair A with C, the probability of success is:
</p><p>
  (1 - P<sub>A</sub>P<sub>C</sub>)(1 - P<sub>B</sub>P<sub>D</sub>) =
  1 - P<sub>A</sub>P<sub>C</sub> - P<sub>B</sub>P<sub>D</sub> +
  P<sub>A</sub>P<sub>B</sub>P<sub>C</sub>P<sub>D</sub>.
</p><p>
  Subtracting the second quantity from the first, we get:
</p><p>
  P<sub>A</sub>P<sub>C</sub> + P<sub>B</sub>P<sub>D</sub> -
  P<sub>A</sub>P<sub>D</sub> - P<sub>B</sub>P<sub>C</sub> =
  P<sub>A</sub>(P<sub>C</sub> - P<sub>D</sub>) + P<sub>B</sub>(P<sub>D</sub> -
  P<sub>C</sub>) =
  (P<sub>A</sub> - P<sub>B</sub>)(P<sub>C</sub> - P<sub>D</sub>).
</p><p>
  Since we know that P<sub>A</sub> &ge; P<sub>B</sub>, and P<sub>C</sub> &ge;
  P<sub>D</sub>, both of the terms in the final expression above must be
  positive or zero, and so their product is also positive or zero. That means
  that we are at least as likely to succeed if we pair A with D as we are if we
  pair A with C. (The contributions from performers other than A, B, C, and D
  are identical across these two cases, so we don't need to consider them
  here.) A similar argument shows that pairing A with B cannot possibly be
  better than pairing A with D.
</p><p>
  So we have proven that in any arrangement, for any pair of roles, we should
  reassign the four performers as necessary to pair up the most reliable and
  least reliable of the four in one role, and the other two performers in the
  other. This implies that the most and least reliable performers in the entire
  cast should be assigned to the same role. (If they are in two different
  roles, just apply the argument above to that pair of roles.) Similarly, the
  second-most and second-least reliable performers should be in the same role,
  and so on. Only the rank orders of the performers' probabilities turn out to
  matter; the actual values are not important!
</p><p>
  This makes our solution very simple: sort the probabilities and then pair up
  the extremes, and then the remaining extremes, and so on. This is O(<b>N</b>
  log <b>N</b>) &mdash; it would be linear if not for the sorting step
  &mdash; and it would easily work for values of <b>N</b> much larger than 40.
</p>

    </div>
  </body>
</html>
