
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam to I/O for Women 2017 - Code Jam to I/O for Women</h3><h1>Ticket Trouble</h1><h3>Problem</h3>
<p>
  A group of <b>F</b> friends is attending a conference held at an
  amphitheater, and they have bought tickets to see a concert there afterwards.
  The amphitheater is a grid of seats with <b>S</b> rows and <b>S</b> columns.
  For each seat, the amphitheater has sold a single ticket (although some of
  the tickets might not have been sold to this group of friends). Each ticket
  is normally labeled with a pair of integers giving the row and column numbers
  of one seat, in that order. For example, a ticket might normally say (2, 1),
  meaning row 2, column 1, or (2, 2), meaning row 2, column 2.
</p><p>
  When the tickets were printed, there was a malfunction, and the two numbers
  in each pair always came out in sorted (that is, nondecreasing) order! So,
  for example, a ticket labeled (1, 2) might actually be for the seat in row 1,
  column 2, or it might actually be for the seat in row 2, column 1. If two
  friends have tickets labeled (1, 2), then one must actually be for row 1,
  column 2, and the other must actually be for row 2, column 1.
</p><p>
  The friends will consult the box office on the day of the concert to find
  out what their actual seat numbers are, but for now, it is unclear! Given the
  printed pairs on the tickets, what is the largest possible number of the
  friends that could actually be seated all in the same-numbered row of seats?
  (The friends do <i>not</i> necessarily need to be seated in consecutive seats
  in that row.)
</p>

<h3>Input</h3>
<p>
  The first line of the input gives the number of test cases, <b>T</b>.
  <b>T</b> test cases follow. Each begins with one line with two integers
  <b>F</b> and <b>S</b>, representing the number of friends and the dimension
  of the grid of seats. Then, <b>F</b> more lines follow. The i-th of those
  lines has two integers <b>A<sub>i</sub></b> and <b>B<sub>i</sub></b>,
  representing the two numbers printed on the i-th friend's ticket.
</p>

<h3>Output</h3>
<p>
  For each test case, output one line containing <code>Case #x: y</code>, where
  <code>x</code> is the test case number (starting from 1) and <code>y</code>
  is largest possible number of the friends that could actually be seated all
  in the same-numbered row of seats.
</p>

<h3>Limits</h3>
<p>
  Time limit: 20 seconds per test set.<br/>
  Memory limit: 1GB.<br/>
  <b>F</b> &le; <b>S</b><sup>2</sup>.<br/>
  1 &le; <b>A<sub>i</sub></b> &le; <b>B<sub>i</sub></b> &le; <b>S</b>, for all
  i.<br/>
  No pair appears more than twice in a test case.<br/>
  No pair containing the same number twice appears more than once in a test
  case.<br/>
</p>

<h4>Small dataset (Test set 1 - Visible)</h4>
<p>
  1 &le; <b>T</b> &le; 50.<br/>
  2 &le; <b>F</b> &le; 3.<br/>
  2 &le; <b>S</b> &le; 3.<br/>
</p>

<h4>Large dataset (Test set 2 - Hidden)</h4>
<p>
  1 &le; <b>T</b> &le; 100.<br/>
  2 &le; <b>F</b> &le; 100.<br/>
  2 &le; <b>S</b> &le; 100.<br/>
</p>


  <h3>Sample</h3>
  <div class="problem-io-wrapper">
  <table>
  <tr>
  <td>
  <br/>
  <span class="io-table-header">Input</span>
  <br/>&nbsp;
  </td>
  <td>
  <br/>
  <span class="io-table-header">Output</span>
  <br/>&nbsp;
  </td>
  </tr>
  <tr>
  <td>
  <pre class="io-content">3
2 3
1 2
1 2
3 3
1 2
2 3
2 2
3 3
1 1
2 2
1 2

  </pre>
  </td>
  <td>
  <pre class="io-content">Case #1: 1
Case #2: 3
Case #3: 2

  </pre>
  </td></tr></table>
  </div>
  

<p>
  In sample case #1, one ticket must actually be for row 1, column 2, and the
  other must actually be for row 2, column 1, even though we do not know which
  is which. So we know that the friends are not seated in the same row, and
  the largest number of friends in any row is 1. Also note that the seats
  have a third row and column, but none of the tickets use the third row or
  column.
</p><p>
  In sample case #2, one of the tickets is definitely for seat 2 in row 2, and
  it is possible that two of the other tickets could be for seats 1 and 3 in
  row 2. So there may be as many as 3 friends in the same row.
</p><p>
  In sample case #3, either there are two friends in row 1 and one in row 2,
  or there are two friends in row 2 and one in row 1. In either case, the
  answer is 2.
</p>

    </div>
  </body>
</html>
