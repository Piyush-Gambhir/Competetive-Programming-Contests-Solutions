
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://www.gstatic.com/external_hosted/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe"></script>
    <script>
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$$$','$$$'] ],
          displayMath: [ ['$$$$','$$$$'] ],
          skipTags: ["script","noscript","style","textarea","pre"],  // allow <code>.
          processEscapes: true
        },
        showProcessingMessages: false,
        messageStyle: "none",
        "HTML-CSS": { scale: 90, fonts: ["TeX"] }
      });
      MathJax.Ajax.loadComplete('https://codingcompetitions.withgoogle.com/static/mathjax-config.js');
      </script>
    <style>
.problem-io-wrapper-new .sampleio-wrapper {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  margin-top: 1rem;
  padding-left: 12.5px;
  padding-right: 12.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-input {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: -12.5px;
  margin-right: 12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-output {
  display: flex;
  flex-direction: column;
  flex: 1 1 0px;
  margin-left: 12.5px;
  margin-right: -12.5px;
  max-width: 50%;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-text {
  flex: 1;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-download-button {
  display: none;
  cursor: pointer;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button {
  display: none;
  cursor: pointer;
  position: relative;
  margin-left: 5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup {
  visibility: hidden;
  width: 100px;
  background-color: #999;
  color: #fff;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 125%;
  left: 50%;
  margin-left: -50px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup::before {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #999 transparent;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button .sample-header-copy-popup-shown {
  visibility: visible;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-header .sample-header-copy-button-hidden {
  display: none;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content {
  display: flex;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 0px 9.5px;
}
.problem-io-wrapper-new .sampleio-wrapper .sample-content .sample-content-text {
  flex-grow: 1;
  margin: 0px;
  overflow-x: auto;
  padding-bottom: 9.5px;
  line-height: normal;
  white-space: pre-wrap;
}
.test-data-download-wrapper {
  display: none;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: fit-content;
  max-width: 600px;
  margin-top: 1rem;
}
.test-data-download-wrapper .test-data-download-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-text {
  flex: 1;
}
.test-data-download-wrapper .test-data-download-header .test-data-download-header-download-button {
  display: none;
  cursor: pointer;
}
.test-data-download-wrapper .test-data-download-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #f5f5f5;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  max-width: 600px;
  margin-top: 1rem;
}
.sample-interaction-wrapper .sample-interaction-header {
  display: flex;
  flex-direction: row;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  border-top: 1px solid #ccc;
  border-radius: 4px 4px 0px 0px;
  padding: 9.5px 9.5px 7px 9.5px;
  font-family: 'Google Sans';
  font-size: 1.2rem;
  font-weight: 300;
}
.sample-interaction-wrapper .sample-interaction-header .sample-interaction-text {
  flex: 1;
}
.sample-interaction-wrapper .sample-interaction-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  border: 1px solid #ccc;
  border-radius: 0px 0px 4px 4px;
  background-color: #e6e6e6;
  padding: 9.5px 9.5px 9.5px 9.5px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-judge-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: left;
  flex-grow: 1;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-solution-labels .sample-interaction-solution-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: right;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper {
  display: flex;
  flex-direction: row;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-output-wrapper .sample-interaction-judge-output-box .sample-interaction-judge-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper {
  display: flex;
  flex-direction: row-reverse;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box {
  text-align: start;
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 4px 8px;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-output-wrapper .sample-interaction-solution-output-box .sample-interaction-solution-output-test {
  margin: 0;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-judge-note {
  font-style: italic;
  color: #4e4e4e;
  margin-right: 20%;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-solution-note {
  font-style: italic;
  color: #4e4e4e;
  margin-left: 20%;
  text-align: end;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-section-label {
  font-weight: bold;
  color: #4e4e4e;
  text-align: center;
}
.sample-interaction-wrapper .sample-interaction-content .sample-interaction-block-spacer {
  height: 9.5px;
}
    </style>
  </head>
  <body>
    <div>
<h3>Code Jam to I/O for Women 2020 - Code Jam to I/O for Women</h3><h1>Analysis: Impromptu Outdoor Gallery</h1><p>
  We can start by making the observation that for every valid quadrilateral,
  p<sub>1</sub>p<sub>2</sub>p<sub>3</sub>p<sub>4</sub>, at least one of the
  two diagonals divides the quadrilateral into two triangles. We can order
  the points in the quadrilateral such that the diagonal formed by points
  p<sub>1</sub> and p<sub>3</sub> splits the quadrilateral into two triangles.
  This means that points p<sub>2</sub> and p<sub>4</sub> are on opposite sides
  of the infinite line through p<sub>1</sub> and p<sub>3</sub> or vice versa.
  Without loss of generality, we can assume the former, since it is just a renaming
  of the same set of points in the same order.
  The area of p<sub>1</sub>p<sub>2</sub>p<sub>3</sub>p<sub>4</sub> is equal to
  the sum of the areas of the two triangles
  p<sub>1</sub>p<sub>3</sub>p<sub>2</sub> and
  p<sub>1</sub>p<sub>3</sub>p<sub>4</sub>.
  These areas are equal to half of the product of the distance between
  p<sub>1</sub> and p<sub>3</sub> and the distance between p<sub>2</sub>
  (or p<sub>4</sub>) and the line through p<sub>1</sub> and p<sub>3</sub>.
  Therefore, if we choose two points to be p<sub>1</sub> and p<sub>3</sub> in
  our quadrilateral, we can find the minimum area using those two points by
  getting the closest point to the line through p<sub>1</sub> and p<sub>3</sub>
  on each side of the line.
</p>

<h3>Test set 1</h3>
<p>
  With only 25 points, we can test every set of 4 points in every order. To
  make sure a specific order defines a simple polygon, it suffices to check
  the sign of the signed area of both triangles is positive. This can be done by
  checking the sign of the
  <a href="https://en.wikipedia.org/wiki/Cross_product" target="_blank">cross product</a>
  when computing the area of the two triangles that make up the quadrilateral.
</p><p>
  We could also can loop over all possible pairs of points to use as p<sub>1</sub>
  and p<sub>3</sub>, and then, for each pair, loop through the remaining points
  to find the closest on each side.
  There are O(<b>N</b><sup>2</sup>) unique pairs of points and for each pair, we
  check O(<b>N</b>) other points to find the closest on each side. This gives
  an overall time complexity of O(<b>N</b><sup>3</sup>).
</p>

<h3>Test set 2</h3>
<p>
  In test set 2 we have significantly more points to choose from that a time
  complexity of O(<b>N</b><sup>3</sup>) will not work for the given time limit.
  We can, however, precompute all lines formed by unique pairs of points
  and do a circular
  <a href="https://en.wikipedia.org/wiki/Sweep_line_algorithm" target="_blank">sweep line</a>,
  processing those lines in order of their slopes; this will make it much faster to
  find the closest points to the lines. As we rotate, we keep the points in a list sorted
  by their distance to the line.
</p><p>
  We can add the horizontal line to the set of stop points, and use it as the starting angle
  for the sweep line. This simplifies initialization because sorting the points by distance
  to this line is simply sorting by y-coordinate.
  Then, for any p<sub>1</sub> and p<sub>3</sub>, the closest points to the line
  p<sub>1</sub>p<sub>3</sub> must be ones which are adjacent to either
  p<sub>1</sub> or p<sub>3</sub> in the sorted list (because p<sub>1</sub> and p<sub>3</sub>
  have a distance of 0). There is a constant number of candidates, so we can check them
  all in constant time to find the best p<sub>2</sub> and p<sub>4</sub>.
</p><p>
  As we rotate our orientation to line up with the next
  smallest sloped line, we can see that the only points that change their
  ordering in the sorted list are the two points of the line segment being
  looked at. Taking advantage of this, we can maintain our sorted list of points
  by just swapping the adjacent pairs of each line after we consider them in
  order of slope.
</p><p>
  Because we still have O(<b>N</b><sup>2</sup>) unique lines and we need to sort
  them by their slopes, the initial time complexity to generate the sorted list
  of lines and the initial ordering of the points is
  O(<b>N</b><sup>2</sup> log <b>N</b>). After we have all the line segments
  sorted, we can maintain the sorted list and go through each line in order and
  find the closest points in O(1) per line. This results in an overall time
  complexity of O(<b>N</b><sup>2</sup> log <b>N</b>).
</p>

    </div>
  </body>
</html>
